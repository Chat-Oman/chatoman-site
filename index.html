<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChatOman | Interactive Pricing Plans</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Added Tajawal font for Arabic text -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Harmony - A warm neutral neutral palette (Stone) with a professional Teal accent for calls to action and highlights. -->
    <!-- Application Structure Plan: The SPA is designed as a conversion-focused landing page. It starts with a Hero section to establish value, followed by the core "Interactive Calculator" to engage users personally. A "Visual Comparison" chart provides a quick, data-driven overview. New "Detailed Pricing Overview" sections present comprehensive monthly, yearly, and setup fee tables. "Feature Explanations" and "Plan Suitability" sections educate the user and help them self-qualify. This structure guides the user from awareness to consideration and finally to a decision, ending with a clear CTA. This is more effective than a static table as it involves the user in the discovery process. -->
    <!-- Visualization & Content Choices: 1. Pricing Tiers -> Interactive Calculator (HTML/JS) -> Goal: Allow users to create a custom quote, making the price feel tangible and personalized. Interaction: Radio buttons for base plans and checkboxes for add-ons dynamically update the total. Justification: Increases engagement and ownership over the selection process. 2. Price vs. Credits -> Doughnut Charts (HTML/JS Canvas) -> Goal: Visually compare the feature distribution of each plan. Interaction: Static visual for quick comparison. Justification: Doughnut charts are excellent for showing parts of a whole, making it easy to see the focus of each plan. 3. Detailed Pricing Tables -> Static HTML Tables with Tailwind -> Goal: Provide comprehensive, at-a- glance information for all pricing structures (monthly, yearly, setup). Interaction: None, purely informational. Justification: Caters to users who prefer detailed tabular data for direct comparison. 4. Feature Details -> Accordion (HTML/JS) -> Goal: Explain technical terms simply without cluttering the UI. Interaction: Click to reveal. Justification: Progressive disclosure makes information more digestible for non-tech-savvy users. 5. FAQ Content Generator -> Text Input & Button with LLM Call (HTML/JS with Gemini API) -> Goal: Demonstrate the practical application of AI chatbots by generating example FAQ content, helping potential clients visualize the initial setup. Interaction: User inputs business type, clicks button, and receives AI-generated FAQs. Justification: Directly showcases the value proposition of a chatbot service and reduces a common friction point in chatbot adoption (content creation). -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        :root {
            --c-primary: #12bfb4;
            --c-dark: #070909;
            --c-light: #f1f1f2;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            /* Add padding to the bottom of the body to prevent content from being hidden behind the sticky button */
            padding-bottom: 80px; /* Adjust as needed based on button height + margin */
        }
        
        /* Hero Section Styles */
        .hero-section {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            padding: 4rem 2rem;
            margin-bottom: 4rem;
            border-radius: 1.5rem;
            position: relative;
            overflow: hidden;
        }
        
        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(18, 191, 180, 0.05) 0%, rgba(241, 241, 242, 0.1) 100%);
            pointer-events: none;
        }
        
        .hero-content {
            text-align: center;
            max-width: 56rem;
            margin: 0 auto 3rem auto;
            position: relative;
            z-index: 1;
        }
        
        .hero-content-ar {
            direction: rtl;
        }
        
        .hero-title {
            font-size: clamp(2.5rem, 5vw, 3.5rem);
            font-weight: 700;
            color: var(--c-dark);
            line-height: 1.1;
            margin-bottom: 1.5rem;
            letter-spacing: -0.02em;
        }
        
        .lang-ar .hero-title {
            line-height: 1.2;
        }
        
        .hero-subtitle {
            font-size: clamp(1.125rem, 2.5vw, 1.25rem);
            font-weight: 400;
            color: #4b5563;
            line-height: 1.6;
            margin-bottom: 2.5rem;
            max-width: 42rem;
            margin-left: auto;
            margin-right: auto;
        }
        
        .hero-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.875rem 2rem;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 50px;
            text-decoration: none;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
            gap: 0.5rem;
            min-width: 10rem;
        }
        
        .btn-primary {
            background-color: var(--c-primary);
            color: white;
            box-shadow: 0 4px 6px -1px rgba(18, 191, 180, 0.25);
        }
        
        .btn-primary:hover {
            background-color: #0e9a8f;
            transform: translateY(-1px);
            box-shadow: 0 6px 12px -1px rgba(18, 191, 180, 0.35);
        }
        
        .btn-secondary {
            background-color: white;
            color: var(--c-dark);
            border: 2px solid #e2e8f0;
            box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.1);
        }
        
        .btn-secondary:hover {
            border-color: var(--c-primary);
            color: var(--c-primary);
            transform: translateY(-1px);
            box-shadow: 0 4px 8px -1px rgba(0, 0, 0, 0.15);
        }
        
        .feature-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(20rem, 1fr));
            gap: 2rem;
            max-width: 72rem;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }
        
        .feature-cards-ar {
            direction: rtl;
        }
        
        .feature-card {
            background: white;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            text-align: center;
            transition: all 0.3s ease;
            border: 1px solid rgba(226, 232, 240, 0.5);
        }
        
        .feature-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.15);
            border-color: rgba(18, 191, 180, 0.3);
        }
        
        .feature-icon {
            width: 4rem;
            height: 4rem;
            margin: 0 auto 1.5rem auto;
            background: linear-gradient(135deg, rgba(18, 191, 180, 0.1) 0%, rgba(18, 191, 180, 0.05) 100%);
            border-radius: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .feature-card:hover .feature-icon {
            background: linear-gradient(135deg, rgba(18, 191, 180, 0.2) 0%, rgba(18, 191, 180, 0.1) 100%);
            transform: scale(1.05);
        }
        
        .feature-icon img {
            width: 2rem;
            height: 2rem;
            filter: brightness(0) saturate(100%) invert(70%) sepia(89%) saturate(448%) hue-rotate(130deg) brightness(92%) contrast(89%);
        }
        
        .feature-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--c-dark);
            margin-bottom: 0.75rem;
            line-height: 1.3;
        }
        
        .feature-description {
            font-size: 0.95rem;
            color: #6b7280;
            line-height: 1.6;
            margin: 0;
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .hero-section {
                padding: 3rem 1.5rem;
                margin-bottom: 3rem;
            }
            
            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 16rem;
            }
            
            .feature-cards {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .feature-card {
                padding: 1.5rem;
            }
        }
        
        @media (max-width: 480px) {
            .hero-section {
                padding: 2rem 1rem;
                border-radius: 1rem;
            }
            
            .hero-content {
                margin-bottom: 2rem;
            }
        }
        /* Custom font family for Arabic text */
        .font-tajawal {
            font-family: 'Tajawal', sans-serif;
        }
        /* Language container styling */
        .lang-ar {
            font-family: 'Tajawal', sans-serif;
            direction: rtl;
            display: none; /* Hidden by default */
        }

        /* Pricing wrapper specific RTL styling */
        .pricing-wrapper-ar {
            direction: rtl;
            text-align: right;
        }

        .pricing-wrapper-ar .pricing-card {
            direction: rtl;
            text-align: right;
        }
        .lang-en {
            font-family: 'Inter', sans-serif;
            direction: ltr;
            display: block; /* Shown by default for English */
        }

        /* Language toggle active states */
        .lang-active {
            display: block !important;
        }

        .lang-inactive {
            display: none !important;
        }
        .plan-card { transition: all 0.3s ease-in-out; }
        .plan-card.selected { border-color: #0d9488; box-shadow: 0 10px 15px -3px rgb(13 148 136 / 0.1), 0 4px 6px -4px rgb(13 148 136 / 0.1); transform: translateY(-5px); }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }
        /* Table specific styles for better readability */
        .table-auto { border-collapse: collapse; width: 100%; }
        .table-auto th, .table-auto td { padding: 0.75rem; text-align: left; border-bottom: 1px solid #e2e8f0; } /* stone-200 */
        .table-auto th { background-color: #f8fafc; font-weight: 600; text-transform: uppercase; font-size: 0.875rem; } /* slate-50 */
        .table-auto tbody tr:last-child td { border-bottom: none; }
        /* Arabic RTL styling for pricing feature items */
        .lang-ar .plan-card .flex.items-center {
            direction: rtl;
            text-align: right;
            flex-direction: row-reverse;
        }
        
        .lang-ar .plan-card .flex.items-center.justify-end {
            justify-content: flex-start;
        }

        /* Pricing cards - consistent layout and alignment for both languages */
        .plan-card {
            display: flex;
            flex-direction: column;
            min-height: 500px;
        }

        .plan-card .space-y-2 {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        /* Arabic pricing cards - consistent layout and alignment */
        .lang-ar .plan-card {
            font-family: 'Tajawal', sans-serif;
        }

        /* Arabic pricing feature items - consistent alignment */
        .lang-ar .plan-card .flex.items-center {
            display: flex;
            align-items: center;
            direction: rtl;
            text-align: right;
            padding: 0.5rem 0;
            font-size: 0.95rem;
            line-height: 1.4;
            font-family: 'Tajawal', sans-serif;
            min-height: 2.5rem;
            justify-content: flex-start;
        }

        /* Icons positioned directly next to text */
        .lang-ar .plan-card .flex.items-center span:first-child {
            min-width: 1rem;
            text-align: center;
            margin-right: 0.5rem;
            margin-left: 0;
            font-size: 1rem;
            flex-shrink: 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Text content aligned properly with flex-grow for extra space on left */
        .lang-ar .plan-card .flex.items-center span:last-child {
            text-align: right;
            flex-grow: 1;
            margin-right: 0;
            margin-left: 0;
        }

        /* Button alignment at bottom */
        .lang-ar .plan-card .plan-cta {
            margin-top: auto;
            font-family: 'Tajawal', sans-serif;
            font-weight: 600;
        }

        /* Ensure equal height cards on mobile for both languages */
        @media (max-width: 768px) {
            .plan-card {
                min-height: auto;
            }
            
            .plan-card .space-y-2 {
                margin-bottom: 1rem;
            }
        }

        /* Language toggle positioning */
        #language-toggle {
            position: fixed;
            z-index: 50;
        }

        /* Mobile: bottom-left */
        @media (max-width: 767px) {
            #language-toggle {
                bottom: 1rem;
                left: 1rem;
                top: auto;
                right: auto;
            }
            #lang-dropdown {
                bottom: 3.5rem;
                left: 0;
                top: auto;
                right: auto;
            }
        }

        /* Desktop: top-right */
        @media (min-width: 768px) {
            #language-toggle {
                top: 1rem;
                right: 1rem;
                bottom: auto;
                left: auto;
            }
            #lang-dropdown {
                top: 3.5rem;
                right: 0;
                bottom: auto;
                left: auto;
            }
        }

        /* Sticky button styles for mobile (centered) */
        .sticky-get-started {
            left: 50%;
            transform: translateX(-50%);
            width: calc(100% - 2rem); /* Full width minus padding */
            max-width: 300px; /* Limit width on larger mobiles */
        }
        /* Sticky button styles for desktop (bottom-left) */
        @media (min-width: 768px) {
            .sticky-get-started {
                left: 2rem; /* Adjusted to left: 2rem */
                right: auto; /* Removed right positioning */
                transform: none;
                width: auto;
                max-width: none;
            }
        }

        /* YouTube Video Modal Styles */
        .video-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        /* Show state for modal overlay */
        .video-modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        /* Modal content container */
        .video-modal-content {
            position: relative;
            width: 90%;
            max-width: 800px;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            transform: scale(0.9) translateY(20px);
            transition: transform 0.3s ease;
        }

        /* Show state for modal content */
        .video-modal-overlay.show .video-modal-content {
            transform: scale(1) translateY(0);
        }

        /* Close button styling */
        .video-modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 40px;
            height: 40px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s ease;
        }

        .video-modal-close:hover {
            background: rgba(0, 0, 0, 0.9);
        }

        /* YouTube iframe container for responsive aspect ratio */
        .youtube-container {
            position: relative;
            width: 100%;
            height: 0;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
        }

        .youtube-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Mobile responsiveness for video modal */
        @media (max-width: 768px) {
            .video-modal-content {
                width: 95%;
                margin: 20px;
            }
            
            .video-modal-close {
                top: 10px;
                right: 10px;
                width: 35px;
                height: 35px;
                font-size: 18px;
            }
        }
        /* Timeline Styles */
        .timeline-container {
            max-width: 60rem;
            margin: 0 auto;
            position: relative;
        }
        
        .timeline-container::before {
            display: none;
        }
        
        .timeline-container-ar::before {
            display: none;
        }
        
        .timeline-item {
            position: relative;
            display: flex;
            align-items: flex-start;
            margin-bottom: 3rem;
            animation: fadeInUp 0.6s ease-out forwards;
            opacity: 0;
            transform: translateY(2rem);
            gap: 2rem;
        }
        
        .timeline-item:nth-child(1) { animation-delay: 0.1s; }
        .timeline-item:nth-child(2) { animation-delay: 0.2s; }
        .timeline-item:nth-child(3) { animation-delay: 0.3s; }
        .timeline-item:nth-child(4) { animation-delay: 0.4s; }
        
        .timeline-item-last {
            margin-bottom: 0;
        }
        
        .timeline-item-ar {
            direction: rtl;
            text-align: right;
            flex-direction: row-reverse;
        }
        
        .timeline-number {
            position: relative;
            z-index: 2;
            width: 4rem;
            height: 4rem;
            border-radius: 50%;
            background: var(--c-primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.25rem;
            box-shadow: 0 4px 8px rgba(18, 191, 180, 0.3);
            flex-shrink: 0;
        }
        
        .timeline-card {
            background: white;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            flex: 1;
            border: 1px solid rgba(226, 232, 240, 0.5);
            transition: all 0.3s ease;
        }
        
        .timeline-card-ar {
            text-align: right;
            direction: rtl;
        }
        
        .timeline-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.15);
            border-color: rgba(18, 191, 180, 0.3);
        }
        
        .timeline-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--c-dark);
            margin-bottom: 0.75rem;
            line-height: 1.3;
        }
        
        .timeline-description {
            font-size: 1rem;
            color: #6b7280;
            line-height: 1.6;
            margin: 0;
        }
        
        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Responsive timeline adjustments */
        @media (max-width: 768px) {
            .timeline-container {
                max-width: 100%;
                padding: 0 1rem;
            }
            
            .timeline-container::before {
                left: 2rem;
            }
            
            .timeline-container-ar::before {
                left: auto;
                right: 2rem;
            }
            
            .timeline-item {
                flex-direction: column;
                align-items: center;
                margin-bottom: 3rem;
                gap: 1rem;
            }
            
            .timeline-item-ar {
                align-items: center;
                flex-direction: column;
            }
            
            .timeline-card {
                width: 100%;
            }
            
            .timeline-card-ar {
                width: 100%;
            }
        }
        /* Why ChatOman Section Styles */
        .why-chatoman-section {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            padding: 4rem 2rem;
            margin-bottom: 4rem;
            border-radius: 1.5rem;
            position: relative;
            overflow: hidden;
        }
        
        .why-chatoman-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(18, 191, 180, 0.05) 0%, rgba(241, 241, 242, 0.1) 100%);
            pointer-events: none;
        }
        
        .why-chatoman-content {
            text-align: center;
            max-width: 56rem;
            margin: 0 auto 3rem auto;
            position: relative;
            z-index: 1;
        }
        
        .why-chatoman-content-ar {
            direction: rtl;
        }
        
        .why-chatoman-title {
            font-size: clamp(2rem, 4vw, 3rem);
            font-weight: 700;
            color: var(--c-dark);
            line-height: 1.2;
            margin-bottom: 1rem;
            letter-spacing: -0.02em;
        }
        
        .why-chatoman-subtitle {
            font-size: clamp(1rem, 2vw, 1.125rem);
            font-weight: 400;
            color: #6b7280;
            line-height: 1.6;
            margin: 0;
            max-width: 42rem;
            margin-left: auto;
            margin-right: auto;
        }
        
        .why-chatoman-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(16rem, 1fr));
            gap: 2rem;
            max-width: 72rem;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }
        
        .why-chatoman-cards-ar {
            direction: rtl;
        }
        
        .why-chatoman-card {
            background: white;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            text-align: center;
            transition: all 0.3s ease;
            border: 1px solid rgba(226, 232, 240, 0.5);
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .why-chatoman-card-ar {
            direction: rtl;
            text-align: center;
        }
        
        .why-chatoman-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.15);
            border-color: rgba(18, 191, 180, 0.3);
        }
        
        .why-chatoman-icon {
            width: 4rem;
            height: 4rem;
            margin: 0 auto 1.5rem auto;
            background: linear-gradient(135deg, rgba(18, 191, 180, 0.1) 0%, rgba(18, 191, 180, 0.05) 100%);
            border-radius: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }
        
        .why-chatoman-card:hover .why-chatoman-icon {
            background: linear-gradient(135deg, rgba(18, 191, 180, 0.2) 0%, rgba(18, 191, 180, 0.1) 100%);
            transform: scale(1.05);
        }
        
        .why-chatoman-icon img {
            width: 2rem;
            height: 2rem;
            filter: brightness(0) saturate(100%) invert(70%) sepia(89%) saturate(448%) hue-rotate(130deg) brightness(92%) contrast(89%);
        }
        
        .why-chatoman-card-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--c-dark);
            margin-bottom: 0.75rem;
            line-height: 1.3;
        }
        
        .why-chatoman-card-description {
            font-size: 0.95rem;
            color: #6b7280;
            line-height: 1.6;
            margin: 0;
            text-align: center;
        }
        
        /* Responsive adjustments for Why ChatOman */
        @media (max-width: 768px) {
            .why-chatoman-section {
                padding: 3rem 1.5rem;
                margin-bottom: 3rem;
            }
            
            .why-chatoman-cards {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .why-chatoman-card {
                padding: 1.5rem;
            }
        }
        
        @media (max-width: 480px) {
            .why-chatoman-section {
                padding: 2rem 1rem;
                border-radius: 1rem;
            }
            
            .why-chatoman-content {
                margin-bottom: 2rem;
            }
        }
        /* Toggle Switch Styling */
        .toggle-switch {
            display: flex;
            background-color: #e2e8f0; /* stone-200 */
            border-radius: 9999px;
            padding: 4px;
            width: 200px;
            margin: 0 auto 2rem auto;
            position: relative;
        }
        .toggle-switch button {
            flex: 1;
            padding: 8px 16px;
            border-radius: 9999px;
            font-weight: 600;
            transition: all 0.3s ease;
            background-color: transparent;
            color: #4b5563; /* stone-600 */
            border: none;
            cursor: pointer;
            position: relative;
            z-index: 1;
        }
        .toggle-switch button.active {
            color: #ffffff;
        }
        .toggle-switch .slider {
            position: absolute;
            top: 4px;
            left: 4px;
            height: calc(100% - 8px);
            width: calc(50% - 4px);
            background-color: #0d9488; /* teal-600 */
            border-radius: 9999px;
            transition: all 0.3s ease;
            z-index: 0;
        }
        .toggle-switch .slider.yearly {
            transform: translateX(100%);
        }
        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 500px;
            position: relative;
            transform: translateY(-20px);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        .modal-overlay.show .modal-content {
            transform: translateY(0);
            opacity: 1;
        }
        .modal-close-button {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #4b5563; /* stone-600 */
        }
        /* Custom styles for doughnut charts */
        .doughnut-chart-canvas {
            width: 120px; /* Fixed size for the doughnut chart */
            height: 120px;
        }
        .shared-pie-legend {
            display: flex;
            flex-wrap: wrap; /* Allow wrapping on small screens */
            justify-content: center;
            margin-top: 1.5rem; /* Increased margin for separation */
            font-size: 0.875rem; /* text-sm */
            color: #4b5563; /* stone-600 */
        }
        .pie-legend-item {
            display: flex;
            align-items: center;
            margin: 0 0.75rem; /* Increased margin for spacing */
        }
        .pie-legend-color {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 0.25rem;
        }
        /* Responsive stacking for stat cards */
        @media (max-width: 479px) { /* Screens less than 480px */
            #doughnut-charts-wrapper {
                flex-direction: column;
            }
            .flex-1 { /* Target individual cards */
                width: 100%; /* Take full width */
                margin-bottom: 1rem; /* Add vertical spacing */
            }
            .flex-1:last-child {
                margin-bottom: 0; /* No margin after the last card */
            }
            .flex-1 h5, .flex-1 .doughnut-chart-canvas, .flex-1 ul {
                text-align: center; /* Center align content within stacked cards */
                margin-left: auto;
                margin-right: auto;
            }
            .flex-1 ul {
                padding-left: 0; /* Remove default ul padding */
            }
            .flex-1 ul li {
                justify-content: center; /* Center dot bullets and text */
            }
        }
    </style>
</head>
<body class="bg-stone-50 text-stone-800">

    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-12">

        <!-- Hero Banner Section Start -->
        <section id="hero-banner" class="hero-section">
            <!-- English Version -->
            <div class="lang-en">
                <div class="hero-content">
                    <h1 class="hero-title">
                        Get More Bookings, Sales & Leads — Automatically.
                    </h1>
                    <p class="hero-subtitle">
                        Get a Smart Arabic-English Chatbot that books appointments, answers questions, and grows your revenue — 24/7, without lifting a finger.
                    </p>
                    
                    <div class="hero-buttons">
                        <button id="hero-get-started-btn" class="btn btn-primary">
                            <span>▶</span> See Demo
                        </button>
                        <button id="get-free-setup-btn" class="btn btn-secondary">
                            Claim Free Setup — 4 Spots Left This Month
                        </button>
                    </div>
                    
                    <!-- Trust message -->
                    <div class="trust-message text-center text-sm text-stone-600 mt-4 space-y-1">
                        <div>✓ Built for Omani businesses — from cafés to clinics</div>
                        <div>✓ Free setup ends August 31st or when spots run out</div>
                        <div>✓ No setup fees. Cancel anytime. Zero risk.</div>
                    </div>
                </div>

                <div class="feature-cards">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <img src="https://img.icons8.com/ios/50/12bfb4/restaurant-menu.png" alt="Restaurant icon">
                        </div>
                        <h3 class="feature-title">Never Miss a Hungry Customer Again</h3>
                        <p class="feature-description">Let your chatbot share menus, answer questions, and direct customers to your order page — 24/7.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <img src="https://img.icons8.com/ios/50/12bfb4/shop.png" alt="Retail store icon">
                        </div>
                        <h3 class="feature-title">Turn Browsers into Buyers — Fast</h3>
                        <p class="feature-description">Help shoppers find what they're looking for, check stock, and send them to your store before they forget.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <img src="https://img.icons8.com/ios/50/12bfb4/calendar.png" alt="Calendar booking icon">
                        </div>
                        <h3 class="feature-title">Book More Appointments Without Missing a Call</h3>
                        <p class="feature-description">Let customers ask about services and schedule visits — no receptionist needed. Fewer calls. More bookings.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <img src="https://img.icons8.com/ios/50/12bfb4/home.png" alt="Real estate icon">
                        </div>
                        <h3 class="feature-title">Capture Leads from Property Browsers Instantly</h3>
                        <p class="feature-description">Automatically qualify leads, answer questions about listings, and schedule viewings — even when your agents are offline.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <img src="https://img.icons8.com/ios/50/12bfb4/graduation-cap.png" alt="Education icon">
                        </div>
                        <h3 class="feature-title">Enroll More Students Without Extra Staff</h3>
                        <p class="feature-description">Let your chatbot explain programs, answer parent questions, and collect registration info — 24/7 in Arabic & English.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <img src="https://img.icons8.com/ios/50/12bfb4/medical-doctor.png" alt="Healthcare icon">
                        </div>
                        <h3 class="feature-title">Answer Patient Questions Before They Call</h3>
                        <p class="feature-description">Let patients check services, insurance info, and clinic hours — so your staff can focus on care, not calls.</p>
                    </div>
                </div>
            </div>

            <!-- Arabic Version -->
            <div class="lang-ar">
                <div class="hero-content hero-content-ar">
                    <h1 class="hero-title">
                        احصل على المزيد من الحجوزات والمبيعات والعملاء المحتملين — تلقائيًا.
                    </h1>
                    <p class="hero-subtitle">
                        احصل على روبوت دردشة ذكي بالعربية والإنجليزية يحجز المواعيد، يجيب على الأسئلة، ويزيد من أرباحك — طوال اليوم دون أي جهد منك.
                    </p>
                    
                    <div class="hero-buttons">
                        <button id="hero-get-started-btn-ar" class="btn btn-primary">
                            <span>▶</span> شاهد العرض التوضيحي
                        </button>
                        <button id="get-free-setup-btn-ar" class="btn btn-secondary">
                            احجز الإعداد المجاني — ٤ مقاعد متبقية هذا الشهر
                        </button>
                    </div>
                    
                    <!-- Trust message -->
                    <div class="trust-message text-center text-sm text-stone-600 mt-4 space-y-1" style="direction: rtl;">
                        <div>✓ مصمم خصيصًا للأعمال العُمانية — من المقاهي إلى العيادات</div>
                        <div>✓ الإعداد المجاني ينتهي في ٣١ أغسطس أو عند نفاد المقاعد</div>
                        <div>✓ بدون رسوم إعداد. يمكنك الإلغاء في أي وقت. بدون مخاطرة.</div>
                    </div>
                </div>

                <div class="feature-cards feature-cards-ar">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <img src="https://img.icons8.com/ios/50/12bfb4/restaurant-menu.png" alt="أيقونة مطعم">
                        </div>
                        <h3 class="feature-title">لا تفوّت أي عميل جائع بعد الآن</h3>
                        <p class="feature-description">دع روبوت الدردشة يشارك قوائم الطعام، يجيب على الأسئلة، ويوجه العملاء لصفحة الطلب — طوال اليوم.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <img src="https://img.icons8.com/ios/50/12bfb4/shop.png" alt="أيقونة متجر">
                        </div>
                        <h3 class="feature-title">حوّل المتصفحين إلى مشترين — بسرعة</h3>
                        <p class="feature-description">ساعد المتسوقين في العثور على ما يريدون، تحقق من توفر المنتجات، وأرسلهم إلى متجرك قبل أن ينسوا.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <img src="https://img.icons8.com/ios/50/12bfb4/calendar.png" alt="أيقونة حجز التقويم">
                        </div>
                        <h3 class="feature-title">احجز المزيد من المواعيد بدون مكالمات فائتة</h3>
                        <p class="feature-description">دع العملاء يسألون عن الخدمات ويحجزون مواعيدهم — بدون موظف استقبال. مكالمات أقل، حجوزات أكثر.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <img src="https://img.icons8.com/ios/50/12bfb4/home.png" alt="أيقونة عقارات">
                        </div>
                        <h3 class="feature-title">التقط العملاء المحتملين من زوار العقارات فورًا</h3>
                        <p class="feature-description">قم بتأهيل العملاء تلقائيًا، أجب عن استفسارات العقارات، وحدد مواعيد المشاهدة — حتى عندما يكون فريقك غير متصل.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <img src="https://img.icons8.com/ios/50/12bfb4/graduation-cap.png" alt="أيقونة تعليمية">
                        </div>
                        <h3 class="feature-title">سجّل المزيد من الطلاب بدون موظفين إضافيين</h3>
                        <p class="feature-description">دع روبوت الدردشة يشرح البرامج، يجيب على أسئلة أولياء الأمور، ويجمع معلومات التسجيل — على مدار الساعة بالعربية والإنجليزية.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <img src="https://img.icons8.com/ios/50/12bfb4/medical-doctor.png" alt="أيقونة رعاية صحية">
                        </div>
                        <h3 class="feature-title">أجب عن أسئلة المرضى قبل أن يتصلوا</h3>
                        <p class="feature-description">دع المرضى يطّلعون على الخدمات، معلومات التأمين، ومواعيد العيادة — حتى يركّز فريقك على الرعاية، لا المكالمات.</p>
                    </div>
                </div>
            </div>
        </section>
        <!-- Hero Banner Section End -->

        <main>
            <!-- How It Works Section Start -->
            <section id="how-it-works" class="mb-20">
                <!-- English Version -->
                <div class="lang-en">
                    <div class="text-center mb-16">
                        <h2 class="text-3xl font-bold text-stone-800">From Zero to Fully Automated — in 4 Simple Steps</h2>
                        <p class="mt-3 text-lg text-stone-600 max-w-2xl mx-auto">Launch your Arabic-English chatbot in under 48 hours — no tech skills, no templates, no stress.</p>
                    </div>

                    <div class="timeline-container">
                        <!-- Step 1 -->
                        <div class="timeline-item">
                            <div class="timeline-number">1</div>
                            <div class="timeline-card">
                                <h3 class="timeline-title">Tell Us About Your Business</h3>
                                <p class="timeline-description">Fill out a quick onboarding form with your services, FAQs, and brand info. Takes less than 5 minutes.</p>
                            </div>
                        </div>
                        
                        <!-- Step 2 -->
                        <div class="timeline-item">
                            <div class="timeline-number">2</div>
                            <div class="timeline-card">
                                <h3 class="timeline-title">We Build It For You</h3>
                                <p class="timeline-description">Our team creates a fully trained chatbot — personalized to your business, fluent in Arabic & English, and ready to serve your customers.</p>
                            </div>
                        </div>
                        
                        <!-- Step 3 -->
                        <div class="timeline-item">
                            <div class="timeline-number">3</div>
                            <div class="timeline-card">
                                <h3 class="timeline-title">You Preview, We Perfect</h3>
                                <p class="timeline-description">You test your chatbot. We handle tweaks, adjustments, and improvements until it's just right.</p>
                            </div>
                        </div>
                        
                        <!-- Step 4 -->
                        <div class="timeline-item timeline-item-last">
                            <div class="timeline-number">4</div>
                            <div class="timeline-card">
                                <h3 class="timeline-title">Go Live — and Start Getting Results</h3>
                                <p class="timeline-description">We connect the chatbot to your website or socials. You're live and ready to capture leads, answer questions, and book appointments 24/7.</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- CTA Button after timeline -->
                    <div class="text-center mt-12">
                        <button class="btn btn-primary how-it-works-cta">
                            Start Building My Chatbot
                        </button>
                    </div>

                    </div>

                <!-- Arabic Version -->
                <div class="lang-ar">
                    <div class="text-center mb-16">
                        <h2 class="text-3xl font-bold text-stone-800">من الصفر إلى التشغيل الآلي الكامل — في ٤ خطوات بسيطة</h2>
                        <p class="mt-3 text-lg text-stone-600 max-w-2xl mx-auto">أطلق روبوت الدردشة الثنائي اللغة خلال ٤٨ ساعة فقط — بدون مهارات تقنية، بدون قوالب، بدون توتر.</p>
                    </div>

                    <div class="timeline-container timeline-container-ar">
                        <!-- Step 1 -->
                        <div class="timeline-item timeline-item-ar">
                            <div class="timeline-number">١</div>
                            <div class="timeline-card timeline-card-ar">
                                <h3 class="timeline-title">أخبرنا عن عملك</h3>
                                <p class="timeline-description">املأ نموذجًا سريعًا يتضمن خدماتك، الأسئلة الشائعة، ومعلومات علامتك التجارية. يستغرق أقل من ٥ دقائق.</p>
                            </div>
                        </div>
                        
                        <!-- Step 2 -->
                        <div class="timeline-item timeline-item-ar">
                            <div class="timeline-number">٢</div>
                            <div class="timeline-card timeline-card-ar">
                                <h3 class="timeline-title">نقوم ببنائه لأجلك</h3>
                                <p class="timeline-description">يقوم فريقنا بإنشاء روبوت دردشة مدرّب بالكامل — مخصص لنشاطك التجاري، يتحدث العربية والإنجليزية، وجاهز لخدمة عملائك.</p>
                            </div>
                        </div>
                        
                        <!-- Step 3 -->
                        <div class="timeline-item timeline-item-ar">
                            <div class="timeline-number">٣</div>
                            <div class="timeline-card timeline-card-ar">
                                <h3 class="timeline-title">أنت تجرّب، ونحن نحسّن</h3>
                                <p class="timeline-description">جرّب روبوتك، وسنتولى جميع التعديلات والتحسينات حتى يصبح مثاليًا.</p>
                            </div>
                        </div>
                        
                        <!-- Step 4 -->
                        <div class="timeline-item timeline-item-last timeline-item-ar">
                            <div class="timeline-number">٤</div>
                            <div class="timeline-card timeline-card-ar">
                                <h3 class="timeline-title">انطلق مباشرة — وابدأ بجني النتائج</h3>
                                <p class="timeline-description">نقوم بربط روبوت الدردشة بموقعك أو حساباتك. أنت جاهز الآن لجذب العملاء، والإجابة عن الأسئلة، وحجز المواعيد على مدار الساعة.</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- CTA Button after timeline -->
                    <div class="text-center mt-12">
                        <button class="btn btn-primary how-it-works-cta-ar">
                            ابدأ ببناء روبوت الدردشة الخاص بي
                        </button>
                    </div>
                </div>
            </section>
            <!-- How It Works Section End -->

            <!-- Why ChatOman Section Start -->
            <section id="why-chatoman" class="why-chatoman-section">
                <!-- English Version -->
                <div class="lang-en">
                    <div class="why-chatoman-content">
                        <h2 class="why-chatoman-title">Why ChatOman?</h2>
                        <p class="why-chatoman-subtitle">What makes our service unique and trusted by local businesses</p>
                    </div>

                    <div class="why-chatoman-cards">
                        <!-- Card 1: Locally Trained AI -->
                        <div class="why-chatoman-card">
                            <div class="why-chatoman-icon">
                                <img src="https://img.icons8.com/ios/50/12bfb4/artificial-intelligence.png" alt="Locally trained AI icon">
                            </div>
                            <h3 class="why-chatoman-card-title">Locally Trained AI</h3>
                            <p class="why-chatoman-card-description">Our chatbots understand local business needs and speak Arabic and English fluently</p>
                        </div>
                        <!-- Card 2: Ongoing Support — Always There When You Need Us -->
                        <div class="why-chatoman-card">
                            <div class="why-chatoman-icon">
                                <img src="https://img.icons8.com/ios-filled/50/12bfb4/headset.png" alt="Ongoing support icon">
                            </div>
                            <h3 class="why-chatoman-card-title">Ongoing Support — Always There When You Need Us</h3>
                            <p class="why-chatoman-card-description">If anything needs fixing or updating, we handle it promptly — no delays, no hassle.</p>
                        </div>
                        <!-- Card 3: Arabic That Sounds Human — Not Google Translate -->
                        <div class="why-chatoman-card">
                            <div class="why-chatoman-icon">
                                <img src="https://img.icons8.com/ios/50/12bfb4/topic.png" alt="Human-like Arabic icon">
                            </div>
                            <h3 class="why-chatoman-card-title">Arabic That Sounds Human — Not Google Translate</h3>
                            <p class="why-chatoman-card-description">ChatOman bots are trained in Modern Standard Arabic and local Omani phrasing — no robotic replies, no awkward grammar.</p>
                        </div>
                        <!-- Card 4: Performance Tracking & Updates -->
                        <div class="why-chatoman-card">
                            <div class="why-chatoman-icon">
                                <img src="https://img.icons8.com/ios/50/12bfb4/combo-chart--v1.png" alt="Performance tracking icon">
                            </div>
                            <h3 class="why-chatoman-card-title">Performance Tracking & Updates</h3>
                            <p class="why-chatoman-card-description">We monitor performance and update your chatbot regularly to keep it effective</p>
                        </div>
                    </div>
                </div>

                <!-- Arabic Version -->
                <div class="lang-ar">
                    <div class="why-chatoman-content why-chatoman-content-ar">
                        <h2 class="why-chatoman-title">لماذا تشات عمان؟</h2>
                        <p class="why-chatoman-subtitle">ما الذي يجعل خدمتنا مميزة وموثوقة من قبل الشركات المحلية؟</p>
                    </div>

                    <div class="why-chatoman-cards why-chatoman-cards-ar">
                        <!-- Card 1: Locally Trained AI -->
                        <div class="why-chatoman-card why-chatoman-card-ar">
                            <div class="why-chatoman-icon">
                                <img src="https://img.icons8.com/ios/50/12bfb4/artificial-intelligence.png" alt="أيقونة الذكاء الاصطناعي المدرب محليًا">
                            </div>
                            <h3 class="why-chatoman-card-title">ذكاء اصطناعي مدرّب محليًا</h3>
                            <p class="why-chatoman-card-description">روبوتاتنا مدرّبة لفهم احتياجات السوق المحلي، وتتحدث العربية والإنجليزية بطلاقة</p>
                        </div>
                        <!-- Card 2: دعم دائم — متى ما احتجت إلينا -->
                        <div class="why-chatoman-card why-chatoman-card-ar">
                            <div class="why-chatoman-icon">
                                <img src="https://img.icons8.com/ios-filled/50/12bfb4/headset.png" alt="أيقونة الدعم الدائم">
                            </div>
                            <h3 class="why-chatoman-card-title">دعم دائم — متى ما احتجت إلينا</h3>
                            <p class="why-chatoman-card-description">إذا حدث أي خلل أو تطلب تحديث، سنتولى الأمر بسرعة — بدون تأخير أو تعقيد.</p>
                        </div>
                        <!-- Card 3: عبارات عربية طبيعية — بدون ترجمة حرفية -->
                        <div class="why-chatoman-card why-chatoman-card-ar">
                            <div class="why-chatoman-icon">
                                <img src="https://img.icons8.com/ios/50/12bfb4/topic.png" alt="أيقونة عربية طبيعية">
                            </div>
                            <h3 class="why-chatoman-card-title">عبارات عربية طبيعية — بدون ترجمة حرفية</h3>
                            <p class="why-chatoman-card-description">روبوتات ChatOman مدرّبة على العربية الفصحى والعبارات العُمانية المحلية — بدون ردود آلية أو تراكيب غريبة.</p>
                        </div>
                        <!-- Card 4: Performance Tracking & Updates -->
                        <div class="why-chatoman-card why-chatoman-card-ar">
                            <div class="why-chatoman-icon">
                                <img src="https://img.icons8.com/ios/50/12bfb4/combo-chart--v1.png" alt="أيقونة تتبع الأداء">
                            </div>
                            <h3 class="why-chatoman-card-title">تتبع الأداء والتحديثات</h3>
                            <p class="why-chatoman-card-description">نراقب أداء الروبوت ونقوم بتحديثه باستمرار ليبقى فعّالًا وحديثًا</p>
                        </div>
                    </div>
                </div>
            </section>
            <!-- Why ChatOman Section End -->

            <section id="calculator" class="mb-20">
                <!-- English Version -->
                <div class="lang-en">
                    <div class="text-center mb-12">
                        <h2 class="text-3xl font-bold">Find Your Perfect Plan</h2>
                        <p class="mt-2 text-md text-stone-600">Start by selecting a base plan, then add any extras you need. Your total updates instantly</p>
                    </div>
                </div>

                <!-- Arabic Version -->
                <div class="lang-ar">
                    <div class="text-center mb-12">
                        <h2 class="text-3xl font-bold">اختر خطتك المثالية</h2>
                        <p class="mt-2 text-md text-stone-600">ابدأ باختيار الخطة الأساسية، ثم أضف أي إضافات تحتاجها. سيتحدث الإجمالي فورًا</p>
                    </div>
                </div>

                <!-- Monthly/Yearly Toggle - English -->
                <div class="lang-en">
                    <div class="toggle-switch">
                        <div id="toggle-slider-en" class="slider"></div>
                        <button id="bill-monthly-en" class="active">Monthly</button>
                        <button id="bill-yearly-en">Yearly</button>
                    </div>
                </div>

                <!-- Monthly/Yearly Toggle - Arabic -->
                <div class="lang-ar">
                    <div class="toggle-switch">
                        <div id="toggle-slider-ar" class="slider"></div>
                        <button id="bill-monthly-ar" class="active">شهريًا</button>
                        <button id="bill-yearly-ar">سنويًا</button>
                    </div>
                </div>

                <!-- Pricing Plans Grid -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
                    <!-- English Pricing Cards -->
                    <div class="lang-en col-span-full">
                        <div class="pricing-wrapper-en grid grid-cols-1 md:grid-cols-3 gap-6 items-stretch">
                            <!-- English plan cards will be dynamically inserted here -->
                        </div>
                    </div>

                    <!-- Arabic Pricing Cards -->
                    <div class="lang-ar col-span-full">
                        <div class="pricing-wrapper-ar grid grid-cols-1 md:grid-cols-3 gap-6 items-stretch">
                            <!-- Arabic plan cards will be dynamically inserted here -->
                        </div>
                    </div>
                </div>

                <!-- Add-ons Section -->
                <div class="bg-white p-8 rounded-2xl shadow-lg max-w-4xl mx-auto">
                    <!-- English Version -->
                    <div class="lang-en">
                        <h3 class="text-2xl font-bold text-center border-b pb-4 mb-6">Add-ons</h3>
                        <!-- New text link for feature explanations -->
                        <p class="text-sm text-center mb-6">
                            <a href="#features" class="text-teal-700 hover:underline text-sm" style="color: #008080;">
                                Need more details? View full feature explanations
                            </a>
                        </p>
                    </div>

                    <!-- Arabic Version -->
                    <div class="lang-ar">
                        <h3 class="text-2xl font-bold text-center border-b pb-4 mb-6">الإضافات</h3>
                        <!-- New text link for feature explanations -->
                        <p class="text-sm text-center mb-6">
                            <a href="#features" class="text-teal-700 hover:underline text-sm" style="color: #008080;">
                                هل تحتاج إلى مزيد من التفاصيل؟ شاهد شرح الميزات الكامل
                            </a>
                        </p>
                    </div>

                    <div id="addons-selection" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
                    </div>

                    <div class="bg-teal-50 border border-teal-200 p-6 rounded-xl">
                        <!-- English Version -->
                        <div class="lang-en">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-stone-600">One-time Setup Fee:</span>
                                <span id="setup-fee-display" class="font-bold text-lg">0 OMR</span>
                            </div>
                            <div class="flex justify-between items-center text-2xl font-bold mb-4">
                                <span id="total-label-en" class="text-teal-800">Monthly Total:</span>
                                <span id="total-price-display" class="text-teal-600">0 OMR</span>
                            </div>
                            <button id="get-started-btn-static" class="w-full bg-teal-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-teal-700 transition-colors">
                                Get Started
                            </button>
                        </div>

                        <!-- Arabic Version -->
                        <div class="lang-ar">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-stone-600">رسوم الإعداد لمرة واحدة:</span>
                                <span id="setup-fee-display-ar" class="font-bold text-lg">٠ ريال عماني</span>
                            </div>
                            <div class="flex justify-between items-center text-2xl font-bold mb-4">
                                <span id="total-label-ar" class="text-teal-800">الإجمالي الشهري:</span>
                                <span id="total-price-display-ar" class="text-teal-600">٠ ريال عماني</span>
                            </div>
                            <button id="get-started-btn-static-ar" class="w-full bg-teal-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-teal-700 transition-colors">
                                ابدأ الآن
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Removed the "Visual Comparison" section -->

            <section id="features" class="mb-20">
                <!-- English Version -->
                <div class="lang-en">
                    <div class="text-center mb-12">
                        <h2 class="text-3xl font-bold">Understanding The Features</h2>
                        <p class="mt-2 text-md text-stone-600">Here's what our key features mean for your business</p>
                    </div>
                    <div id="accordion-container-en" class="max-w-3xl mx-auto space-y-4">
                    </div>
                </div>

                <!-- Arabic Version -->
                <div class="lang-ar">
                    <div class="text-center mb-12">
                        <h2 class="text-3xl font-bold">فهم الميزات</h2>
                        <p class="mt-2 text-md text-stone-600">إليك ما تعنيه ميزاتنا الرئيسية لعملك</p>
                    </div>
                    <div id="accordion-container-ar" class="max-w-3xl mx-auto space-y-4">
                    </div>
                </div>
            </section>

            

            <section id="suitability" class="text-center">
                <!-- English Version -->
                <div class="lang-en">
                    <div class="text-center mb-12">
                        <h2 class="text-3xl font-bold">Who Is This For?</h2>
                        <p class="mt-2 text-md text-stone-600">We've designed our plans to match the needs of local businesses</p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <div class="bg-white p-6 rounded-2xl shadow-md">
                            <h3 class="font-bold text-teal-700 text-lg">Lead Booster</h3>
                            <p class="text-stone-600 mt-2">For small businesses that want to capture leads without lifting a finger</p>
                        </div>
                        <div class="bg-white p-6 rounded-2xl shadow-md">
                            <h3 class="font-bold text-teal-700 text-lg">Booking Maximiser</h3>
                            <p class="text-stone-600 mt-2">For busy service brands that want to automate appointments and FAQs</p>
                        </div>
                        <div class="bg-white p-6 rounded-2xl shadow-md">
                            <h3 class="font-bold text-teal-700 text-lg">24/7 Sales Engine</h3>
                            <p class="text-stone-600 mt-2">For growth-focused brands that want full AI automation and insights</p>
                        </div>
                    </div>
                </div>

                <!-- Arabic Version -->
                <div class="lang-ar">
                    <div class="text-center mb-12">
                        <h2 class="text-3xl font-bold">لمن هذه الخدمة؟</h2>
                        <p class="mt-2 text-md text-stone-600">لقد صممنا خططنا لتناسب احتياجات الشركات المحلية</p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <div class="bg-white p-6 rounded-2xl shadow-md">
                            <h3 class="font-bold text-teal-700 text-lg">مضاعف العملاء المحتملين</h3>
                            <p class="text-stone-600 mt-2">للشركات الصغيرة التي تريد جمع العملاء المحتملين بدون أي مجهود</p>
                        </div>
                        <div class="bg-white p-6 rounded-2xl shadow-md">
                            <h3 class="font-bold text-teal-700 text-lg">مضاعف الحجوزات</h3>
                            <p class="text-stone-600 mt-2">للعلامات الخدمية المزدحمة التي تريد أتمتة الحجوزات والأسئلة الشائعة</p>
                        </div>
                        <div class="bg-white p-6 rounded-2xl shadow-md">
                            <h3 class="font-bold text-teal-700 text-lg">محرك المبيعات على مدار الساعة</h3>
                            <p class="text-stone-600 mt-2">للعلامات التجارية الطموحة التي تريد أتمتة كاملة وتحليلات ذكية</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Contact Us Section -->
            <section id="contact-us" class="text-center mt-20 mb-12">
                <!-- English Version -->
                <div class="lang-en">
                    <div class="bg-white p-6 rounded-2xl shadow-lg max-w-xl mx-auto">
                        <h2 class="text-3xl font-bold text-teal-700 mb-4">Contact Us</h2>
                        <p class="text-lg text-stone-600 mb-2">
                            Instagram: <a href="https://www.instagram.com/chatoman.co?igsh=MWd5Z3g5NDNmYjBlbQ%3D%3D&utm_source=qr" target="_blank" rel="noopener noreferrer" class="text-teal-600 hover:underline">@chatoman.co</a>
                        </p>
                        <p class="text-lg text-stone-600">
                            Email: <a href="mailto:info@chatoman.co" class="text-teal-600 hover:underline">info@chatoman.co</a>
                        </p>
                    </div>
                </div>

                <!-- Arabic Version -->
                <div class="lang-ar">
                    <div class="bg-white p-6 rounded-2xl shadow-lg max-w-xl mx-auto">
                        <h2 class="text-3xl font-bold text-teal-700 mb-4">اتصل بنا</h2>
                        <p class="text-lg text-stone-600 mb-2">
                            انستغرام: <a href="https://www.instagram.com/chatoman.co?igsh=MWd5Z3g5NDNmYjBlbQ%3D%3D&utm_source=qr" target="_blank" rel="noopener noreferrer" class="text-teal-600 hover:underline">تشات_عمان@</a>
                        </p>
                        <p class="text-lg text-stone-600">
                            البريد الإلكتروني: <a href="mailto:info@chatoman.co" class="text-teal-600 hover:underline">راسلنا</a>
                        </p>
                    </div>
                </div>
            </section>

        </main>

        <footer class="text-center mt-20 border-t pt-8">
            <!-- English Version -->
            <div class="lang-en">
                <p class="text-stone-600">&copy; 2025 ChatOman. All rights reserved</p>
                <p class="text-sm text-stone-500 mt-2">
                    <a href="https://drive.google.com/file/d/1SAvfegTPfldVI6_paFjiljJFgmBLA3lv/view?usp=sharing" target="_blank" rel="noopener noreferrer" class="text-stone-500 hover:underline px-2">Terms of Service</a> | 
                    <a href="https://drive.google.com/file/d/1SIblYVGlIoIclA454ZtvmXwR4esFlllV/view?usp=sharing" target="_blank" rel="noopener noreferrer" class="text-stone-500 hover:underline px-2">Privacy Policy</a>
                </p>
                <p class="text-sm text-stone-500 mt-2">Bilingual AI Chatbots for Omani Businesses</p>
            </div>

            <!-- Arabic Version -->
            <div class="lang-ar">
                <p class="text-stone-600">&copy; ٢٠٢٥ تشات عُمان. جميع الحقوق محفوظة</p>
                <p class="text-sm text-stone-500 mt-2">
                    <a href="https://drive.google.com/file/d/1SAvfegTPfldVI6_paFjiljJFgmBLA3lv/view?usp=sharing" target="_blank" rel="noopener noreferrer" class="text-stone-500 hover:underline px-2">شروط الخدمة</a> | 
                    <a href="https://drive.google.com/file/d/1SIblYVGlIoIclA454ZtvmXwR4esFlllV/view?usp=sharing" target="_blank" rel="noopener noreferrer" class="text-stone-500 hover:underline px-2">سياسة الخصوصية</a>
                </p>
                <p class="text-sm text-stone-500 mt-2">روبوتات دردشة ذكية ثنائية اللغة للشركات العُمانية</p>
            </div>
        </footer>

    </div>

    <!-- Modal for Feature Explanations -->
    <div id="feature-modal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close-button" id="modal-close-button">&times;</button>
            <h3 id="modal-title" class="text-xl font-bold mb-4"></h3>
            <p id="modal-content" class="text-stone-700"></p>
        </div>
    </div>

    <!-- Feature Popup Modal -->
    <div id="feature-popup-modal" class="modal-overlay">
        <div class="modal-content max-w-md">
            <button class="modal-close-button" id="feature-popup-close-button">&times;</button>
            <h3 id="feature-popup-title" class="text-lg font-bold mb-3"></h3>
            <p id="feature-popup-content" class="text-stone-600 text-sm"></p>
        </div>
    </div>

    <!-- Lead Booster Form Modal -->
    <div id="lead-booster-form-modal" class="modal-overlay" style="z-index: 2000;">
        <div class="modal-content" style="max-width: 95vw; width: 95vw; max-height: 95vh; height: 95vh; padding: 0; border-radius: 8px; overflow: hidden;">
            <button class="modal-close-button" id="lead-booster-form-close-button" style="position: absolute; top: 10px; right: 10px; z-index: 10; background: rgba(0,0,0,0.7); color: white; border: none; border-radius: 50%; width: 30px; height: 30px; font-size: 16px; cursor: pointer;">&times;</button>
            <iframe id="lead-booster-iframe" allowtransparency="true" allowfullscreen="true" allow="geolocation; microphone; camera" src="" frameborder="0" style="width: 100%; height: 100%; border: none;"></iframe>
        </div>
    </div>

    <!-- Free Setup Modal -->
    <div id="free-setup-modal" class="modal-overlay">
        <div class="modal-content max-w-md">
            <!-- English Version -->
            <div class="lang-en">
                <button class="modal-close-button" id="free-setup-close-button">&times;</button>
                <h3 class="text-xl font-bold mb-6 text-center">Choose a plan</h3>
                <div class="space-y-3">
                    <button class="free-setup-option w-full bg-white border-2 border-teal-600 text-teal-600 font-bold py-3 px-4 rounded-lg hover:bg-teal-50 transition-colors" data-url="https://9kkd846w.forms.app/form/689838dcd8483487c5c76aa4">
                        Lead Booster
                    </button>
                    <button class="free-setup-option w-full bg-white border-2 border-teal-600 text-teal-600 font-bold py-3 px-4 rounded-lg hover:bg-teal-50 transition-colors" data-url="https://9kkd846w.forms.app/form/6898350ccb6bbdd2360e13b1">
                        Booking Maximiser
                    </button>
                    <button class="free-setup-option w-full bg-white border-2 border-teal-600 text-teal-600 font-bold py-3 px-4 rounded-lg hover:bg-teal-50 transition-colors" data-url="https://9kkd846w.forms.app/form/689711b37e179dafb5549723">
                        24/7 Sales Agent
                    </button>
                </div>
                <button class="w-full mt-4 bg-stone-200 text-stone-600 font-bold py-2 px-4 rounded-lg hover:bg-stone-300 transition-colors" id="free-setup-close-en">
                    Close
                </button>
            </div>

            <!-- Arabic Version -->
            <div class="lang-ar">
                <button class="modal-close-button" id="free-setup-close-button-ar">&times;</button>
                <h3 class="text-xl font-bold mb-6 text-center" style="direction: rtl;">اختر الخطة</h3>
                <div class="space-y-3" style="direction: rtl;">
                    <button class="free-setup-option w-full bg-white border-2 border-teal-600 text-teal-600 font-bold py-3 px-4 rounded-lg hover:bg-teal-50 transition-colors" data-url="https://9kkd846w.forms.app/form/689838dcd8483487c5c76aa4" style="direction: rtl;">
                        معزز العملاء المحتملين
                    </button>
                    <button class="free-setup-option w-full bg-white border-2 border-teal-600 text-teal-600 font-bold py-3 px-4 rounded-lg hover:bg-teal-50 transition-colors" data-url="https://9kkd846w.forms.app/form/6898350ccb6bbdd2360e13b1" style="direction: rtl;">
                        مُعظّم الحجوزات
                    </button>
                    <button class="free-setup-option w-full bg-white border-2 border-teal-600 text-teal-600 font-bold py-3 px-4 rounded-lg hover:bg-teal-50 transition-colors" data-url="https://9kkd846w.forms.app/form/689711b37e179dafb5549723" style="direction: rtl;">
                        وكيل المبيعات على مدار الساعة
                    </button>
                </div>
                <button class="w-full mt-4 bg-stone-200 text-stone-600 font-bold py-2 px-4 rounded-lg hover:bg-stone-300 transition-colors" id="free-setup-close-ar" style="direction: rtl;">
                    إغلاق
                </button>
            </div>
        </div>
    </div>

    <!-- Plan Selection Modal -->
    <div id="plan-selection-modal" class="modal-overlay">
        <div class="modal-content max-w-md">
            <!-- English Version -->
            <div class="lang-en">
                <button class="modal-close-button" id="plan-selection-close-button">&times;</button>
                <h3 class="text-xl font-bold mb-6 text-center">Choose a plan</h3>
                <div class="space-y-3">
                    <button class="plan-selection-option w-full bg-white border-2 border-teal-600 text-teal-600 font-bold py-3 px-4 rounded-lg hover:bg-teal-50 transition-colors" data-url="https://9kkd846w.forms.app/form/689838dcd8483487c5c76aa4">
                        Lead Booster
                    </button>
                    <button class="plan-selection-option w-full bg-white border-2 border-teal-600 text-teal-600 font-bold py-3 px-4 rounded-lg hover:bg-teal-50 transition-colors" data-url="https://9kkd846w.forms.app/form/6898350ccb6bbdd2360e13b1">
                        Booking Maximiser
                    </button>
                    <button class="plan-selection-option w-full bg-white border-2 border-teal-600 text-teal-600 font-bold py-3 px-4 rounded-lg hover:bg-teal-50 transition-colors" data-url="https://9kkd846w.forms.app/form/689711b37e179dafb5549723">
                        24/7 Sales Agent
                    </button>
                </div>
                <button class="w-full mt-4 bg-stone-200 text-stone-600 font-bold py-2 px-4 rounded-lg hover:bg-stone-300 transition-colors" id="plan-selection-close-en">
                    Close
                </button>
            </div>

            <!-- Arabic Version -->
            <div class="lang-ar">
                <button class="modal-close-button" id="plan-selection-close-button-ar">&times;</button>
                <h3 class="text-xl font-bold mb-6 text-center" style="direction: rtl;">اختر الخطة</h3>
                <div class="space-y-3" style="direction: rtl;">
                    <button class="plan-selection-option w-full bg-white border-2 border-teal-600 text-teal-600 font-bold py-3 px-4 rounded-lg hover:bg-teal-50 transition-colors" data-url="https://9kkd846w.forms.app/form/689838dcd8483487c5c76aa4" style="direction: rtl;">
                        معزز العملاء المحتملين
                    </button>
                    <button class="plan-selection-option w-full bg-white border-2 border-teal-600 text-teal-600 font-bold py-3 px-4 rounded-lg hover:bg-teal-50 transition-colors" data-url="https://9kkd846w.forms.app/form/6898350ccb6bbdd2360e13b1" style="direction: rtl;">
                        مُعظّم الحجوزات
                    </button>
                    <button class="plan-selection-option w-full bg-white border-2 border-teal-600 text-teal-600 font-bold py-3 px-4 rounded-lg hover:bg-teal-50 transition-colors" data-url="https://9kkd846w.forms.app/form/689711b37e179dafb5549723" style="direction: rtl;">
                        وكيل المبيعات على مدار الساعة
                    </button>
                </div>
                <button class="w-full mt-4 bg-stone-200 text-stone-600 font-bold py-2 px-4 rounded-lg hover:bg-stone-300 transition-colors" id="plan-selection-close-ar" style="direction: rtl;">
                    إغلاق
                </button>
            </div>
        </div>
    </div>

    <!-- Language Toggle Button -->
    <div id="language-toggle" class="fixed top-4 right-4 md:top-4 md:right-4 bottom-4 left-4 md:bottom-auto md:left-auto z-50">
        <button id="lang-button" class="w-12 h-12 bg-white border-2 border-teal-600 rounded-full shadow-lg flex items-center justify-center text-teal-600 font-bold text-sm hover:bg-teal-50 transition-colors">
            EN ▾
        </button>
        <div id="lang-dropdown" class="absolute top-14 right-0 md:top-14 md:right-0 bottom-14 left-0 md:bottom-auto md:left-auto bg-white border border-stone-200 rounded-lg shadow-lg min-w-[120px] hidden">
            <div class="py-1">
                <button class="lang-option w-full text-left px-3 py-2 text-sm hover:bg-stone-50 transition-colors" data-lang="en">
                    <span class="lang-en">EN | English</span>
                    <span class="lang-ar">EN | English</span>
                </button>
                <button class="lang-option w-full text-left px-3 py-2 text-sm hover:bg-stone-50 transition-colors" data-lang="ar">
                    <span class="lang-en">AR | العربية</span>
                    <span class="lang-ar">AR | العربية</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Sticky Get Started Button -->
    <div id="sticky-get-started" class="fixed bottom-4 z-40 rounded-lg shadow-lg bg-teal-600 hover:bg-teal-700 transition-colors p-3 text-white font-bold text-center sticky-get-started">
        <!-- English Version -->
        <div class="lang-en">
            <button class="w-full h-full">Get Started</button>
        </div>
        <!-- Arabic Version -->
        <div class="lang-ar">
            <button class="w-full h-full">ابدأ الآن</button>
        </div>
    </div>

    <!-- YouTube Video Modal -->
    <div id="video-modal" class="video-modal-overlay">
        <div class="video-modal-content">
            <!-- Close button for the video modal -->
            <button id="video-modal-close" class="video-modal-close" aria-label="Close video">×</button>
            
            <!-- YouTube video container with responsive aspect ratio -->
            <div class="youtube-container">
                <iframe id="youtube-iframe" 
                        src="" 
                        title="ChatOman Demo Video" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                        allowfullscreen>
                </iframe>
            </div>
        </div>
    </div>

    <script>
        // Google Form URL - moved to global scope
        const googleFormURL = "https://docs.google.com/forms/d/e/1FAIpQLSdH72A9D2bouVJwVk09PEQrVM4B15pW4kcoN3gB6scBCEQ6LA/viewform?usp=header";

        // Language audit checker
        function auditLanguageSeparation() {
            const arabicRegex = /[\u0600-\u06FF]/;
            const englishRegex = /[a-zA-Z]/;
            const issues = [];

            function getElementPath(element) {
                const path = [];
                while (element && element !== document) {
                    let selector = element.tagName.toLowerCase();
                    if (element.id) selector += `#${element.id}`;
                    if (element.className) selector += `.${element.className.split(' ').join('.')}`;
                    path.unshift(selector);
                    element = element.parentElement;
                }
                return path.join(' > ');
            }

            // Check all .lang-en elements
            document.querySelectorAll('.lang-en *').forEach(el => {
                const text = el.textContent.trim();
                if (text && arabicRegex.test(text)) {
                    issues.push({
                        type: 'Arabic in English block',
                        path: getElementPath(el),
                        text: text.substring(0, 100)
                    });
                }
            });

            // Check all .lang-ar elements
            document.querySelectorAll('.lang-ar *').forEach(el => {
                const text = el.textContent.trim();
                if (text && englishRegex.test(text) && !text.match(/^[0-9\s\u0600-\u06FF]+$/)) {
                    issues.push({
                        type: 'English in Arabic block',
                        path: getElementPath(el),
                        text: text.substring(0, 100)
                    });
                }
            });

            if (issues.length > 0) {
                console.warn('Language separation issues found:');
                issues.forEach(issue => console.warn(issue));
            } else {
                console.log('✅ No language separation issues found!');
            }

            return issues;
        }

        // Pricing data
        const pricingData = [
            { 
                id: 'starter', 
                name: { en: 'Lead Booster', ar: 'مضاعف العملاء المحتملين' },
                price: { monthly: 32, yearly: 352 },
                credits: 1000, 
                agents: 1,
                aiActions: 1,
                setupFee: { monthly: 15, yearly: 0 },
                features: {
                    brandingRemoved: false,
                    customDomain: false,
                    whatsappIntegration: false,
                    analyticsEmail: false,
                    basicFaqSupport: true,
                    responseUpdates: '2x/month',
                    chatUpdatesWeekly: false,
                    lightCustomization: false,
                    fullPersonalization: false,
                    dedicatedChatbotManager: false
                },
                bestFor: { 
                    en: 'For small businesses that want to capture leads without lifting a finger.', 
                    ar: 'للشركات الصغيرة التي تريد جمع العملاء المحتملين بدون أي مجهود.' 
                },
                yearlySavings: 32
            },
            { 
                id: 'pro', 
                name: { en: 'Booking Maximiser', ar: 'مضاعف الحجوزات' },
                price: { monthly: 89, yearly: 979 },
                credits: 3000, 
                agents: 1,
                aiActions: 3,
                setupFee: { monthly: 25, yearly: 0 },
                features: {
                    brandingRemoved: false,
                    customDomain: false,
                    whatsappIntegration: true,
                    analyticsEmail: true,
                    basicFaqSupport: true,
                    responseUpdates: 'Weekly',
                    chatUpdatesWeekly: true,
                    lightCustomization: true,
                    fullPersonalization: false,
                    dedicatedChatbotManager: false
                },
                bestFor: { 
                    en: 'For busy service brands that want to automate appointments and FAQs.', 
                    ar: 'للعلامات الخدمية المزدحمة التي تريد أتمتة الحجوزات والأسئلة الشائعة.' 
                },
                yearlySavings: 89
            },
            { 
                id: 'elite', 
                name: { en: '24/7 Sales Engine', ar: 'محرك المبيعات على مدار الساعة' },
                price: { monthly: 249, yearly: 2739 },
                credits: 8000, 
                agents: 2,
                aiActions: 5,
                setupFee: { monthly: 49, yearly: 0 },
                features: {
                    brandingRemoved: true,
                    customDomain: true,
                    whatsappIntegration: true,
                    analyticsEmail: 'advanced',
                    basicFaqSupport: true,
                    responseUpdates: 'Unlimited',
                    chatUpdatesWeekly: true,
                    lightCustomization: true,
                    fullPersonalization: true,
                    dedicatedChatbotManager: false
                },
                bestFor: { 
                    en: 'For growth-focused brands that want full AI automation and insights.', 
                    ar: 'للعلامات التجارية الطموحة التي تريد أتمتة كاملة وتحليلات ذكية.' 
                },
                yearlySavings: 249
            }
        ];

        // State variables for pricing
        let selectedPlanId = null;
        let selectedAddOnIds = new Set();
        let currentBillingCycle = { en: 'monthly', ar: 'monthly' };

        // Arabic digits conversion
        const arabicDigits = n => n.toString().replace(/[0-9]/g, d => "٠١٢٣٤٥٦٧٨٩"[d]);

        // Helper function to get price with proper formatting
        function getPrice(plan, cycle, lang) {
            const val = cycle === 'monthly' ? plan.price.monthly : plan.price.yearly;
            return lang === 'ar' ? arabicDigits(val) : val;
        }

        // Helper function to get setup fee with proper formatting
        function getSetupFee(plan, cycle, lang) {
            const val = cycle === 'monthly' ? plan.setupFee.monthly : plan.setupFee.yearly;
            if (val === 0) {
                return lang === 'ar' ? 'مجاني' : 'Free';
            }
            return lang === 'ar' ? `${arabicDigits(val)} ريال عماني` : `${val} OMR`;
        }

        // Create pricing card
        function createCard(plan, lang, cycle) {
            const price = getPrice(plan, cycle, lang);
            const setupFee = getSetupFee(plan, cycle, lang);
            const period = cycle === 'monthly' ? 
                (lang === 'ar' ? 'شهريًا' : 'mo') : 
                (lang === 'ar' ? 'سنويًا' : 'year');
            const currency = lang === 'ar' ? 'ريال عماني' : 'OMR';
            const isProPlan = plan.id === 'pro';

            const card = document.createElement('div');
            card.className = `plan-card bg-white p-6 rounded-2xl shadow-md border-2 border-transparent cursor-pointer relative ${isProPlan ? 'pt-10' : ''}`;
            card.dataset.planId = plan.id;

            if (lang === 'ar') {
                card.style.direction = 'rtl';
                card.style.textAlign = 'right';
            }

            const credits = lang === 'ar' ? arabicDigits(plan.credits.toLocaleString()) : plan.credits.toLocaleString();
            const agents = lang === 'ar' ? arabicDigits(plan.agents) : plan.agents;

            card.innerHTML = `
                ${isProPlan ? `<div class="absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-teal-600 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg z-10">${lang === 'ar' ? 'الأكثر شيوعًا' : 'Most Popular'}</div>` : ''}
                <h3 class="text-xl font-bold text-teal-700 ${lang === 'ar' ? 'text-right' : ''}">${plan.name[lang]}</h3>
                <div class="text-sm text-stone-600 mb-4 ${lang === 'ar' ? 'text-right' : ''}">${plan.bestFor[lang]}</div>
                <div class="text-3xl font-bold my-4 ${lang === 'ar' ? 'text-right' : ''}">
                    ${price} 
                    <span class="text-lg font-normal text-stone-500">${currency}/${period}</span>
                </div>
                ${cycle === 'yearly' ? `<div class="text-sm text-stone-600 mb-4 ${lang === 'ar' ? 'text-right' : ''}">${lang === 'ar' ? `وفر ${arabicDigits(plan.yearlySavings)} ريال عماني/سنويًا` : `Save ${plan.yearlySavings} OMR/year`}</div>` : ''}
                <div class="space-y-2 text-stone-600 mb-4" style="${lang === 'ar' ? 'direction: rtl; text-align: right;' : ''}">
                    <!-- ✔ INCLUDED FEATURES FIRST -->
                    <div class="flex items-center ${lang === 'ar' ? 'justify-end' : ''} cursor-pointer hover:bg-stone-50 p-1 rounded feature-item" data-feature="messages">
                        ${lang === 'ar' ? 
                            `<span>يعالج حتى ${credits} رسالة من العملاء</span> <span class="text-teal-500 mr-2">✔</span>` :
                            `<span class="text-teal-500 mr-2">✔</span> <span>Handle up to ${credits} Customer Messages</span>`
                        }
                    </div>
                    <div class="flex items-center ${lang === 'ar' ? 'justify-end' : ''} cursor-pointer hover:bg-stone-50 p-1 rounded feature-item" data-feature="agents">
                        ${lang === 'ar' ? 
                            `<span>${agents === 1 ? 'روبوت دردشة ذكي واحد مخصص لك' : 'اثنان من روبوتات الدردشة الذكية المخصصة لك'}</span> <span class="text-teal-500 mr-2">✔</span>` :
                            `<span class="text-teal-500 mr-2">✔</span> <span>${agents} Personalized AI Chatbot${agents > 1 ? 's' : ''}</span>`
                        }
                    </div>
                    <div class="flex items-center ${lang === 'ar' ? 'justify-end' : ''} cursor-pointer hover:bg-stone-50 p-1 rounded feature-item" data-feature="ai-actions">
                        ${lang === 'ar' ? 
                            `<span>${plan.id === 'starter' ? 'يشمل إجراء ذكاء اصطناعي واحد' : plan.id === 'pro' ? 'يشمل ٣ إجراءات ذكاء اصطناعي' : 'يشمل ٥ إجراءات ذكاء اصطناعي'}</span> <span class="text-teal-500 mr-2">✔</span>` :
                            `<span class="text-teal-500 mr-2">✔</span> <span>${plan.id === 'starter' ? '1 AI Action' : plan.id === 'pro' ? '3 AI Actions' : '5 AI Actions'}</span>`
                        }
                    </div>
                    ${plan.features.whatsappIntegration ? `
                        <div class="flex items-center ${lang === 'ar' ? 'justify-end' : ''} cursor-pointer hover:bg-stone-50 p-1 rounded feature-item" data-feature="whatsapp-integration">
                            ${lang === 'ar' ? 
                                `<span>تكامل مع واتساب وإنستغرام</span> <span class="text-teal-500 mr-2">✔</span>` :
                                `<span class="text-teal-500 mr-2">✔</span> <span>WhatsApp / Instagram Integration</span>`
                            }
                        </div>
                    ` : ''}
                    ${plan.id === 'pro' || plan.id === 'elite' ? `
                        <div class="flex items-center ${lang === 'ar' ? 'justify-end' : ''} cursor-pointer hover:bg-stone-50 p-1 rounded feature-item" data-feature="analytics">
                            ${lang === 'ar' ? 
                                `<span>${plan.id === 'pro' ? 'تقارير أداء عبر البريد الإلكتروني' : 'لوحة تحكم تحليلات متقدمة'}</span> <span class="text-teal-500 mr-2">✔</span>` :
                                `<span class="text-teal-500 mr-2">✔</span> <span>${plan.id === 'pro' ? 'Email Performance Reports' : 'Advanced Analytics Dashboard'}</span>`
                            }
                        </div>
                    ` : ''}
                    ${plan.id === 'starter' ? `
                        <div class="flex items-center ${lang === 'ar' ? 'justify-end' : ''} cursor-pointer hover:bg-stone-50 p-1 rounded feature-item" data-feature="basic-faq">
                            ${lang === 'ar' ? '<span>إجابات جاهزة للأسئلة المتكررة</span> <span class="text-teal-500 mr-2">✔</span>' : '<span class="text-teal-500 mr-2">✔</span> <span>Built-In Answers to Common Questions</span>'}
                        </div>
                        <div class="flex items-center ${lang === 'ar' ? 'justify-end' : ''} cursor-pointer hover:bg-stone-50 p-1 rounded feature-item" data-feature="response-updates">
                            ${lang === 'ar' ? '<span>تحسينات أداء نصف شهرية</span> <span class="text-teal-500 mr-2">✔</span>' : '<span class="text-teal-500 mr-2">✔</span> <span>Bimonthly Performance Tweaks</span>'}
                        </div>
                    ` : ''}
                    ${plan.id === 'pro' ? `
                        <div class="flex items-center ${lang === 'ar' ? 'justify-end' : ''} cursor-pointer hover:bg-stone-50 p-1 rounded feature-item" data-feature="chat-updates">
                            ${lang === 'ar' ? '<span>تحسينات أسبوعية وأداء مخصص للردود</span> <span class="text-teal-500 mr-2">✔</span>' : '<span class="text-teal-500 mr-2">✔</span> <span>Weekly Optimization & Response Tuning</span>'}
                        </div>
                        <div class="flex items-center ${lang === 'ar' ? 'justify-end' : ''} cursor-pointer hover:bg-stone-50 p-1 rounded feature-item" data-feature="light-customization">
                            ${lang === 'ar' ? '<span>إعداد مخصص لأسئلة وأجوبة وتدفق المحادثة</span> <span class="text-teal-500 mr-2">✔</span>' : '<span class="text-teal-500 mr-2">✔</span> <span>Tailored FAQ + Chat Flow Setup</span>'}
                        </div>
                    ` : ''}
                    ${plan.id === 'elite' ? `
                        <div class="flex items-center ${lang === 'ar' ? 'justify-end' : ''} cursor-pointer hover:bg-stone-50 p-1 rounded feature-item" data-feature="dedicated-manager">
                            ${lang === 'ar' ? '<span>أخصائي نجاح روبوت دردشة خاص بك</span> <span class="text-teal-500 mr-2">✔</span>' : '<span class="text-teal-500 mr-2">✔</span> <span>Your Own Chatbot Success Specialist</span>'}
                        </div>
                        <div class="flex items-center ${lang === 'ar' ? 'justify-end' : ''} cursor-pointer hover:bg-stone-50 p-1 rounded feature-item" data-feature="full-personalization">
                            ${lang === 'ar' ? '<span>تخصيص كامل حسب علامتك التجارية وعروضك</span> <span class="text-teal-500 mr-2">✔</span>' : '<span class="text-teal-500 mr-2">✔</span> <span>Fully Tailored to Your Brand & Offers</span>'}
                        </div>
                    ` : ''}
                    ${plan.features.brandingRemoved ? `
                        <div class="flex items-center ${lang === 'ar' ? 'justify-end' : ''} cursor-pointer hover:bg-stone-50 p-1 rounded feature-item" data-feature="branding-removed">
                            ${lang === 'ar' ? 
                                `<span>بدون شعارات خارجية — علامتك فقط</span> <span class="text-teal-500 mr-2">✔</span>` :
                                `<span class="text-teal-500 mr-2">✔</span> <span>No External Logos — Your Brand Only</span>`
                            }
                        </div>
                    ` : ''}
                    ${plan.features.customDomain ? `
                        <div class="flex items-center ${lang === 'ar' ? 'justify-end' : ''} cursor-pointer hover:bg-stone-50 p-1 rounded feature-item" data-feature="custom-domain">
                            ${lang === 'ar' ? 
                                `<span>رابط باسم نشاطك التجاري يعزز ثقة العملاء</span> <span class="text-teal-500 mr-2">✔</span>` :
                                `<span class="text-teal-500 mr-2">✔</span> <span>Branded Link (chat.yourbusiness.com)</span>`
                            }
                        </div>
                    ` : ''}
                    
                    <!-- ✖ EXCLUDED FEATURES LAST -->
                    ${!plan.features.whatsappIntegration ? `
                        <div class="flex items-center ${lang === 'ar' ? 'justify-end' : ''} cursor-pointer hover:bg-stone-50 p-1 rounded feature-item" data-feature="whatsapp-integration">
                            ${lang === 'ar' ? 
                                `<span>تكامل مع واتساب وإنستغرام</span> <span class="text-stone-400 mr-2">✖</span>` :
                                `<span class="text-stone-400 mr-2">✖</span> <span>WhatsApp / Instagram Integration</span>`
                            }
                        </div>
                    ` : ''}
                    ${!plan.features.brandingRemoved ? `
                        <div class="flex items-center ${lang === 'ar' ? 'justify-end' : ''} cursor-pointer hover:bg-stone-50 p-1 rounded feature-item" data-feature="branding-removed">
                            ${lang === 'ar' ? 
                                `<span>بدون شعارات خارجية — علامتك فقط</span> <span class="text-stone-400 mr-2">✖</span>` :
                                `<span class="text-stone-400 mr-2">✖</span> <span>No External Logos — Your Brand Only</span>`
                            }
                        </div>
                    ` : ''}
                    ${!plan.features.customDomain ? `
                        <div class="flex items-center ${lang === 'ar' ? 'justify-end' : ''} cursor-pointer hover:bg-stone-50 p-1 rounded feature-item" data-feature="custom-domain">
                            ${lang === 'ar' ? 
                                `<span>رابط باسم نشاطك التجاري يعزز ثقة العملاء</span> <span class="text-stone-400 mr-2">✖</span>` :
                                `<span class="text-stone-400 mr-2">✖</span> <span>Branded Link (chat.yourbusiness.com)</span>`
                            }
                        </div>
                    ` : ''}
                    <div class="text-sm text-stone-600 mt-2 ${lang === 'ar' ? 'text-right' : ''}">
                        ${lang === 'ar' ? 'رسوم الإعداد:' : 'Setup Fee:'} ${setupFee}
                    </div>
                </div>
                <button class="plan-cta w-full bg-teal-600 text-white font-bold py-3 px-4 rounded-lg mt-6 hover:bg-teal-700 transition-colors">
                    ${lang === 'ar' ? 
                        (plan.id === 'starter' ? 'اختر مضاعف العملاء المحتملين' : 
                         plan.id === 'pro' ? 'اختر مضاعف الحجوزات' : 'اختر محرك المبيعات على مدار الساعة') :
                        (plan.id === 'starter' ? 'Choose Lead Booster' : 
                         plan.id === 'pro' ? 'Choose Booking Maximiser' : 'Choose 24/7 Sales Engine')
                    }
                </button>
            `;

            return card;
        }

        // Main render function
        function renderPricing(lang, cycle) {
            const wrapper = document.querySelector(
                lang === 'ar' ? '.pricing-wrapper-ar' : '.pricing-wrapper-en'
            );
            if (!wrapper) return;

            wrapper.innerHTML = ''; // Clear existing cards

            pricingData.forEach(plan => {
                const card = createCard(plan, lang, cycle);
                wrapper.appendChild(card);
            });

            // Add event listeners to new cards
            wrapper.querySelectorAll('.plan-card').forEach(card => {
                card.addEventListener('click', (e) => {
                    // Don't select plan if clicking on CTA button, feature link, or feature item
                    if (e.target.classList.contains('plan-cta') || 
                        e.target.classList.contains('feature-link') || 
                        e.target.closest('.feature-item')) {
                        return;
                    }
                    const planId = card.dataset.planId;
                    handlePlanSelection(planId);
                });
            });

            // Add event listeners for feature items in pricing cards
            wrapper.querySelectorAll('.feature-item').forEach(item => {
                item.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const featureKey = item.dataset.feature;
                    openFeaturePopup(featureKey);
                });
            });

            wrapper.querySelectorAll('.plan-cta').forEach(button => {
                button.addEventListener('click', (e) => {
                    // Get the plan ID from the parent card
                    const planCard = button.closest('.plan-card');
                    const planId = planCard.dataset.planId;
                    
                    // Check if this is the Lead Booster button
                    if (planId === 'starter') {
                        // Prevent any default behavior including scrolling
                        e.preventDefault();
                        e.stopPropagation();
                        // Open the Lead Booster form directly in browser
                        window.open('https://9kkd846w.forms.app/form/689838dcd8483487c5c76aa4', '_blank');
                        return;
                    }
                    
                    // Check if this is the Booking Maximiser button
                    if (planId === 'pro') {
                        // Prevent any default behavior including scrolling
                        e.preventDefault();
                        e.stopPropagation();
                        // Open the Booking Maximiser form directly in browser
                        window.open('https://9kkd846w.forms.app/form/6898350ccb6bbdd2360e13b1', '_blank');
                        return;
                    }
                    
                    // Check if this is the 24/7 Sales Engine button
                    if (planId === 'elite') {
                        // Prevent any default behavior including scrolling
                        e.preventDefault();
                        e.stopPropagation();
                        // Open the 24/7 Sales Engine form directly in browser
                        window.open('https://9kkd846w.forms.app/form/689711b37e179dafb5549723', '_blank');
                        return;
                    }
                    
                    // For other plans, proceed with normal behavior
                    e.stopPropagation(); // Prevent plan selection when clicking CTA
                    
                    // Select the plan
                    handlePlanSelection(planId);
                    
                    // Scroll to the add-on summary section
                    const summarySection = document.querySelector('.bg-teal-50');
                    if (summarySection) {
                        summarySection.scrollIntoView({ 
                            behavior: 'smooth', 
                            block: 'center' 
                        });
                        
                        // Add highlight animation
                        summarySection.style.boxShadow = '0 0 0 3px rgba(13, 148, 136, 0.5)';
                        summarySection.style.transition = 'box-shadow 0.3s ease';
                        
                        setTimeout(() => {
                            summarySection.style.boxShadow = '';
                        }, 1000);
                    }
                });
            });

            wrapper.querySelectorAll('.feature-link').forEach(link => {
                link.addEventListener('click', (event) => {
                    event.preventDefault();
                    event.stopPropagation(); // Prevent plan selection when clicking feature link
                    const featureTitle = event.target.dataset.featureTitle;
                    const explanation = featureExplanations.find(f => f.title === featureTitle);
                    if (explanation) {
                        openModal(explanation.title, explanation.content + '<br><br><span class="font-tajawal">' + explanation.arabicContent + '</span>');
                    }
                });
            });
        }

        // Setup billing toggle for a specific language
        function setupBillingToggle(lang) {
            const btnMonthly = document.getElementById(`bill-monthly-${lang}`);
            const btnYearly = document.getElementById(`bill-yearly-${lang}`);
            const slider = document.getElementById(`toggle-slider-${lang}`);

            if (!btnMonthly || !btnYearly || !slider) return;

            // Correct mapping for Arabic
            const cycleMap = lang === 'ar' 
                ? { 'شهريًا': 'monthly', 'سنويًا': 'yearly' }
                : { 'Monthly': 'monthly', 'Yearly': 'yearly' };

            [btnMonthly, btnYearly].forEach(btn => {
                btn.onclick = () => {
                    const cycle = cycleMap[btn.textContent.trim()];
                    currentBillingCycle[lang] = cycle;
                    renderPricing(lang, cycle);

                    // Update button states
                    btnMonthly.classList.toggle('active', cycle === 'monthly');
                    btnYearly.classList.toggle('active', cycle === 'yearly');

                    // Update slider position
                    if (cycle === 'yearly') {
                        slider.classList.add('yearly');
                    } else {
                        slider.classList.remove('yearly');
                    }

                    // Update pricing display
                    updateDisplay();
                };
            });
        }

        const addOns = [
            // Individual Add-Ons
            { id: 'extraCredits', name: 'Extra 1,000 Messages', priceOMR: 15, arabicName: '١,٠٠٠ رسالة إضافية', featureExplanationTitle: 'Extra Messages' },
            { id: 'extraAIAction', name: 'Extra AI Action', priceOMR: 15, arabicName: 'إجراء ذكاء اصطناعي إضافي', featureExplanationTitle: 'Extra AI Action' },
            { id: 'extraAIAgent', name: 'Extra AI Agent', priceOMR: 39, arabicName: 'وكيل ذكاء اصطناعي إضافي', featureExplanationTitle: 'Extra AI Agent' },
            { id: 'brandingRemoval', name: 'Branding Removal', priceOMR: 29, arabicName: 'إزالة العلامة التجارية', featureExplanationTitle: 'Branding Removal' },
            { id: 'customDomain', name: 'Custom Domain', priceOMR: 35, arabicName: 'نطاق مخصص', featureExplanationTitle: 'Custom Domain' },
            { id: 'whatsappIntegration', name: 'WhatsApp / IG Integration', priceOMR: 15, arabicName: 'دمج واتساب / إنستغرام', featureExplanationTitle: 'WhatsApp / IG Integration' },
            { id: 'performanceReport', name: 'Performance Report', priceOMR: 10, arabicName: 'تقرير الأداء', featureExplanationTitle: 'Performance Report' },
            { id: 'advancedAnalytics', name: 'Advanced Analytics Dashboard', priceOMR: 19, arabicName: 'لوحة تحكم تحليلات متقدمة', featureExplanationTitle: 'Advanced Analytics Dashboard' },
            
            // Bundled Add-Ons
            { id: 'premiumIdentity', name: 'Premium Identity', priceOMR: 59, arabicName: 'الهوية المميزة', featureExplanationTitle: 'Premium Identity', isBundle: true },
            { id: 'conversionInsights', name: 'Conversion Insights', priceOMR: 24, arabicName: 'رؤى التحويل', featureExplanationTitle: 'Conversion Insights', isBundle: true },
            { id: 'scalePack', name: 'Scale Pack', priceOMR: 47, arabicName: 'حزمة التوسع', featureExplanationTitle: 'Scale Pack', isBundle: true },
            { id: 'engagementBooster', name: 'Engagement Booster', priceOMR: 25, arabicName: 'معزز التفاعل', featureExplanationTitle: 'Engagement Booster', isBundle: true }
        ];

        // English feature explanations
        const featureExplanationsEN = [
            { title: 'Messages / mo', content: 'Each time your chatbot replies to a user, it uses one message credit. Your plan includes a monthly allowance — and you can scale easily with add-ons. Unused credits do not roll over.' },
            { title: 'AI Actions', content: 'These are automated tasks your bot can perform — like booking appointments, capturing leads, checking availability, or processing requests. Each AI Action saves time and reduces manual follow-up.' },
            { title: 'AI Agents', content: 'Think of an AI Agent as a distinct chatbot with its own knowledge and role. You can have different agents for sales, support, or specific services — each trained separately.' },
            { title: 'Updates', content: 'We regularly review and fine-tune your chatbot\'s responses — based on real user activity — to keep it accurate, helpful, and aligned with your business.' },
            { title: 'Advanced Analytics Dashboard', content: 'Gain full visibility into your chatbot\'s performance. See how many users are interacting, where they\'re from, what they\'re asking, and when activity peaks — so you can refine content, increase engagement, and optimize for results.' },
            { title: 'Add-ons', content: `
                <div class="space-y-4">
                    <div><strong>Extra AI Action:</strong> Add another automated task — like booking, order lookup, file upload, or lead qualification — to expand what your chatbot can do.</div>
                    <div><strong>Extra AI Agent:</strong> Deploy another chatbot for a new department, service, or language. Each agent is trained separately and managed independently.</div>
                    <div><strong>Branding Removal:</strong> Remove all external logos (Chatbase, ChatOman) so your chatbot looks 100% like it's built in-house. Increases trust, professionalism, and conversion rates.</div>
                    <div><strong>Custom Domain:</strong> Host your chatbot on a branded subdomain like chat.yourbusiness.com instead of a generic link — adding trust and professionalism to your customer experience.</div>
                    <div><strong>WhatsApp / IG Integration:</strong> Let users message your chatbot directly through WhatsApp or Instagram — a must-have for mobile-first, DM-heavy businesses.</div>
                    <div><strong>Performance Report:</strong> A simple monthly report showing top questions, engagement, and conversation volume — ideal for tracking impact at a glance.</div>
                    <div><strong>Advanced Analytics Dashboard:</strong> Real-time performance data with filters and visualizations — including location, drop-offs, and flow insights.</div>
                    <div><strong>Premium Identity:</strong> Includes: Branding Removal + Custom Domain. Create a fully white-labeled experience that looks and feels 100% yours.</div>
                    <div><strong>Conversion Insights:</strong> Includes: Performance Report + Advanced Analytics Dashboard. Understand what's working and what to improve with both overview and deep-dive analytics.</div>
                    <div><strong>Scale Pack:</strong> Includes: Extra AI Agent + Extra AI Action. Expand capacity and capabilities to support more workflows and departments.</div>
                    <div><strong>Engagement Booster:</strong> Includes: WhatsApp / IG Integration + Extra 1,000 Messages. Reach more users and handle more conversations — directly in the DMs.</div>
                </div>
            ` },
            { title: 'FAQs', content: `
                <div class="space-y-4">
                    <div><strong>Q: What is ChatOman?</strong><br>
                    A: ChatOman builds smart, bilingual AI chatbots for Omani businesses — designed to answer customer questions 24/7 in Arabic and English, boost bookings, and reduce repetitive staff tasks.</div>
                    
                    <div><strong>Q: How does the chatbot actually work?</strong><br>
                    A: We train your bot using your services, FAQs, pricing, and menus. When a customer asks something, the chatbot instantly finds the most relevant answer and responds — in natural language, not canned replies.</div>
                    
                    <div><strong>Q: Is it really bilingual — or just translated?</strong><br>
                    A: Yes — fully bilingual. Every chatbot is trained in Modern Standard Arabic, Omani dialect, and English. No auto-translations. It understands and responds based on how your customers actually speak.</div>
                    
                    <div><strong>Q: How much does it cost?</strong><br>
                    A: Monthly plans start at:<br>
                    • Lead Booster: 32 OMR<br>
                    • Booking Maximiser: 89 OMR<br>
                    • 24/7 Sales Engine: 249 OMR<br>
                    You can also save up to 1 month with annual billing (setup is free on yearly plans).</div>
                    
                    <div><strong>Q: What is a message credit?</strong><br>
                    A: Each time your chatbot sends a reply, it uses 1 message credit. So if 1,000 people message you, and the bot replies to each, that uses 1,000 credits.</div>
                    
                    <div><strong>Q: Can I upgrade or switch plans later?</strong><br>
                    A: Yes — anytime. You can add more credits, agents, or switch plans with a quick email. No penalties or lock-ins.</div>
                    
                    <div><strong>Q: How long does setup take?</strong><br>
                    A: Once we receive your onboarding form, setup usually takes 2–3 business days. In most cases, you'll be live within 48 hours.</div>
                    
                    <div><strong>Q: Can I update or edit the chatbot later?</strong><br>
                    A: Absolutely. If your hours, services, or prices change — just email us. We'll retrain the bot with the new info. All plans include regular updates.</div>
                    
                    <div><strong>Q: Does it work on WhatsApp or Instagram?</strong><br>
                    A: Yes. With our WhatsApp & IG Integration add-on, your customers can chat with your bot directly in DMs — no website required.</div>
                    
                    <div><strong>Q: Can I remove "Powered by Chatbase"?</strong><br>
                    A: Yes. The Branding Removal add-on hides all third-party labels — so your chatbot looks 100% custom, like part of your own team.</div>
                    
                    <div><strong>Q: What happens if I run out of message credits?</strong><br>
                    A: You'll get an automatic email alert before that happens. You can instantly top up with our Extra 1,000 Messages add-on — no downtime.</div>
                    
                    <div><strong>Q: How do I contact support?</strong><br>
                    A: Email us anytime at info@chatoman.co — we typically reply within 24 hours (often sooner).</div>
                </div>
            ` }
        ];

        // Arabic feature explanations
        const featureExplanationsAR = [
            { title: 'الرسائل شهريًا', content: 'كل رد ترسله الدردشة الآلية يُحسب كرسالة. كل باقة تحتوي على عدد محدد من الرسائل شهريًا — ويمكنك التوسيع باستخدام الإضافات. الرسائل غير المستخدمة لا تنتقل للشهر التالي.' },
            { title: 'إجراءات الذكاء الاصطناعي', content: 'هذه مهام مؤتمتة يمكن للروبوت تنفيذها — مثل حجز المواعيد، جمع بيانات العملاء، التحقق من التوفر، أو معالجة الطلبات. كل إجراء يوفر وقت الموظفين ويقلل من المتابعة اليدوية.' },
            { title: 'وكلاء الذكاء الاصطناعي', content: 'كل وكيل هو روبوت منفصل له معلوماته ودوره الخاص. يمكنك إنشاء وكلاء مختلفين للمبيعات أو الدعم أو لخدمات محددة — كل واحد يتم تدريبه بشكل منفصل.' },
            { title: 'التحديثات', content: 'نقوم بمراجعة وتحديث إجابات الدردشة الآلية بانتظام بناءً على تفاعل المستخدمين — لضمان الدقة والفاعلية وتوافق الإجابات مع نشاطك التجاري.' },
            { title: 'لوحة تحكم التحليلات المتقدمة', content: 'احصل على رؤية شاملة لأداء الدردشة الآلية. تعرف على عدد المستخدمين، مواقعهم، الأسئلة الأكثر شيوعًا، وأوقات الذروة — حتى تتمكن من تحسين المحتوى وزيادة التفاعل وتحقيق أفضل النتائج.' },
            { title: 'الإضافات', content: `
                <div class="space-y-4" style="direction: rtl; text-align: right;">
                    <div><strong>إجراء إضافي:</strong> أضف إجراء آلي إضافي — مثل الحجز، تحميل الملفات، أو جمع بيانات العملاء — لتوسيع قدرات روبوتك.</div>
                    <div><strong>وكيل إضافي:</strong> أنشئ روبوت جديد لقسم آخر، لغة أخرى، أو خدمة مختلفة. كل وكيل يتم تدريبه وإدارته بشكل مستقل.</div>
                    <div><strong>إزالة العلامة التجارية:</strong> احذف جميع الشعارات الخارجية واجعل روبوتك يبدو وكأنه مدمج بالكامل ضمن نظامك — مما يزيد من الاحترافية ومعدلات التحويل.</div>
                    <div><strong>نطاق مخصص:</strong> استضف روبوت الدردشة على نطاق مخصص مثل: chat.yourbusiness.com بدلًا من رابط عام — مما يزيد من الثقة والمصداقية ويعزز تجربة المستخدم.</div>
                    <div><strong>تكامل واتساب / إنستغرام:</strong> اجعل العملاء يتواصلون معك بسهولة عبر الرسائل المباشرة — مثالي للأعمال التي تعتمد على الدردشة في توليد الحجوزات أو الطلبات.</div>
                    <div><strong>تقرير الأداء:</strong> تقرير شهري مبسط يوضح عدد المحادثات، التفاعل، والأسئلة المتكررة — لمتابعة تأثير الروبوت بسرعة.</div>
                    <div><strong>لوحة تحكم التحليلات المتقدمة:</strong> بيانات تفصيلية مباشرة تشمل المواقع الجغرافية، نقاط التسرب، ومسارات المحادثات — لمساعدتك في تحسين الأداء وقياس العائد.</div>
                    <div><strong>هوية احترافية:</strong> تتضمن: إزالة العلامات التجارية + نطاق مخصص → روبوت يظهر بشكل متكامل تحت علامتك فقط، دون أي جهات خارجية.</div>
                    <div><strong>تحليلات التحويل:</strong> تتضمن: تقرير الأداء + لوحة تحكم التحليلات → رؤية واضحة لكل ما يعمل وما يحتاج تحسين — من التقارير السريعة إلى البيانات المتعمقة.</div>
                    <div><strong>باقة التوسعة:</strong> تتضمن: وكيل إضافي + إجراء إضافي → مثالية للشركات التي تحتاج تغطية أقسام متعددة أو مزيدًا من الإجراءات الآلية.</div>
                    <div><strong>مُعزز التفاعل:</strong> تتضمن: تكامل واتساب / إنستغرام + 1,000 رسالة إضافية → التعامل مع حجم أكبر من المحادثات مباشرة داخل الرسائل الخاصة.</div>
                </div>
            ` },
            { title: 'الأسئلة الشائعة', content: `
                <div class="space-y-4" style="direction: rtl; text-align: right;">
                    <div><strong>س: ما هو ChatOman؟</strong><br>
                    ج: ChatOman يبني روبوتات دردشة ذكية ثنائية اللغة مخصصة للأعمال العمانية — مصممة للرد على أسئلة العملاء على مدار الساعة باللغتين العربية والإنجليزية، وزيادة الحجوزات، وتقليل المهام المتكررة على الموظفين.</div>
                    
                    <div><strong>س: كيف يعمل روبوت الدردشة؟</strong><br>
                    ج: نقوم بتدريب روبوتك باستخدام معلومات خدماتك، الأسئلة الشائعة، الأسعار، والقوائم. عندما يسأل العميل شيئًا، يجد الروبوت الإجابة الأنسب ويستجيب فورًا — بلغة طبيعية، دون ردود مبرمجة مسبقًا.</div>
                    
                    <div><strong>س: هل هو فعلاً ثنائي اللغة أم مجرد ترجمة؟</strong><br>
                    ج: نعم — ثنائي اللغة بالكامل. كل روبوت يتم تدريبه بالعربية الفصحى، اللهجة العمانية، والإنجليزية. لا نستخدم ترجمات تلقائية. يفهم ويجيب بناءً على أسلوب كلام عملائك الحقيقي.</div>
                    
                    <div><strong>س: كم تبلغ التكلفة؟</strong><br>
                    ج: تبدأ الخطط الشهرية من:<br>
                    • مضاعف العملاء المحتملين: ‏32 ريال عماني<br>
                    • مضاعف الحجوزات: ‏89 ريال عماني<br>
                    • محرك المبيعات على مدار الساعة: ‏249 ريال عماني<br>
                    ويمكنك التوفير حتى شهر كامل عبر الدفع السنوي (يشمل الإعداد مجانًا في الخطط السنوية).</div>
                    
                    <div><strong>س: ما هو رصيد الرسائل؟</strong><br>
                    ج: كل مرة يرد فيها روبوت الدردشة على رسالة، يتم استخدام رصيد واحد. إذا تواصل معك 1000 شخص، ورد عليهم الروبوت، يتم استخدام 1000 رصيد.</div>
                    
                    <div><strong>س: هل يمكنني ترقية أو تغيير الخطة لاحقًا؟</strong><br>
                    ج: نعم — في أي وقت. يمكنك إضافة المزيد من الرسائل أو الوكلاء، أو تغيير الخطة ببساطة عبر إرسال بريد إلكتروني. لا توجد غرامات أو التزامات.</div>
                    
                    <div><strong>س: كم يستغرق الإعداد؟</strong><br>
                    ج: بعد استلام نموذج البيانات الخاص بك، يتم الإعداد خلال 2–3 أيام عمل. في معظم الحالات، يتم تشغيل الروبوت خلال 48 ساعة.</div>
                    
                    <div><strong>س: هل يمكنني تعديل الروبوت لاحقًا؟</strong><br>
                    ج: بالتأكيد. إذا تغيرت ساعات العمل أو الأسعار أو الخدمات، فقط أرسل لنا بريداً إلكترونياً، وسنقوم بتحديث وتدريب الروبوت. جميع الخطط تشمل التحديثات المنتظمة.</div>
                    
                    <div><strong>س: هل يعمل على واتساب أو إنستغرام؟</strong><br>
                    ج: نعم. مع إضافة التكامل مع واتساب/إنستغرام، يمكن لعملائك التحدث مع الروبوت مباشرة من الرسائل الخاصة — دون الحاجة لزيارة موقعك.</div>
                    
                    <div><strong>س: هل يمكن إزالة عبارة "Powered by Chatbase"؟</strong><br>
                    ج: نعم. إضافة إزالة العلامات التجارية تحذف جميع شعارات الأطراف الثالثة — ليظهر الروبوت وكأنه جزء من فريقك الداخلي.</div>
                    
                    <div><strong>س: ماذا يحدث إذا نفد رصيد الرسائل؟</strong><br>
                    ج: ستتلقى تنبيهًا تلقائيًا عبر البريد قبل انتهاء الرصيد. ويمكنك تعبئة الرصيد فورًا عبر إضافة "1000 رسالة إضافية" — دون أي توقف في الخدمة.</div>
                    
                    <div><strong>س: كيف أتواصل مع الدعم؟</strong><br>
                    ج: راسلنا في أي وقت على البريد الإلكتروني: info@chatoman.co — نرد عادة خلال 24 ساعة (وغالبًا أسرع).</div>
                </div>
            ` }
        ];

        // Helper function to map addon IDs to feature keys
        function getAddonFeatureKey(addonId) {
            const mapping = {
                'extraCredits': 'extra-credits',
                'extraAIAction': 'extra-ai-action',
                'extraAIAgent': 'extra-ai-agent',
                'brandingRemoval': 'branding-removal',
                'customDomain': 'custom-domain',
                'whatsappIntegration': 'whatsapp-ig-integration',
                'performanceReport': 'performance-report',
                'advancedAnalytics': 'advanced-analytics',
                'premiumIdentity': 'premium-identity',
                'conversionInsights': 'conversion-insights',
                'scalePack': 'scale-pack',
                'engagementBooster': 'engagement-booster'
            };
            return mapping[addonId] || addonId;
        }

        // Render add-ons function
        function renderAddOns() {
            const addonsSelectionContainer = document.getElementById('addons-selection');
            if (!addonsSelectionContainer) return;
            
            // Clear existing add-ons
            addonsSelectionContainer.innerHTML = '';
            
            const isArabicMode = currentLang === 'ar';
            
            if (isArabicMode) {
                // Arabic-specific add-ons with updated list
                const arabicAddOns = [
                    // Individual Add-ons
                    { id: 'extraCredits', name: '١,٠٠٠ رسالة إضافية', price: '١٥' },
                    { id: 'extraAIAction', name: 'إجراء ذكاء اصطناعي إضافي', price: '١٥' },
                    { id: 'extraAIAgent', name: 'وكيل ذكاء اصطناعي إضافي', price: '٣٩' },
                    { id: 'brandingRemoval', name: 'إزالة العلامة التجارية', price: '٢٩' },
                    { id: 'customDomain', name: 'نطاق مخصص', price: '٣٥' },
                    { id: 'whatsappIntegration', name: 'دمج واتساب / إنستغرام', price: '١٥' },
                    { id: 'performanceReport', name: 'تقرير الأداء', price: '١٠' },
                    { id: 'advancedAnalytics', name: 'لوحة تحكم تحليلات متقدمة', price: '١٩' },
                    
                    // Bundled Add-ons
                    { id: 'premiumIdentity', name: 'الهوية المميزة', price: '٥٩', isBundle: true },
                    { id: 'conversionInsights', name: 'رؤى التحويل', price: '٢٤', isBundle: true },
                    { id: 'scalePack', name: 'حزمة التوسع', price: '٤٧', isBundle: true },
                    { id: 'engagementBooster', name: 'معزز التفاعل', price: '٢٥', isBundle: true }
                ];
                
                arabicAddOns.forEach(addOn => {
                    const addOnElement = document.createElement('label');
                    const bundleClass = addOn.isBundle ? 'bg-teal-50 border-2 border-teal-200' : 'bg-stone-100';
                    addOnElement.className = `flex items-center ${bundleClass} p-4 rounded-lg cursor-pointer hover:bg-stone-200 transition-colors`;
                    addOnElement.style.direction = 'rtl';
                    addOnElement.style.textAlign = 'right';
                    
                    const bundleLabel = addOn.isBundle ? '<span class="text-xs bg-teal-600 text-white px-2 py-1 rounded-full mr-2">حزمة</span>' : '';
                    
                    addOnElement.innerHTML = `
                        <div class="flex-1 text-right">
                            <div class="flex items-center justify-start cursor-pointer feature-item" data-feature="${getAddonFeatureKey(addOn.id)}">
                                <span class="text-teal-500 ml-2">✔</span>
                                <span class="font-semibold text-stone-700">${addOn.name}</span>
                                ${bundleLabel}
                            </div>
                            <div class="text-sm text-stone-500 mt-1">
                                +${addOn.price} ريال/شهريًا
                            </div>
                        </div>
                        <input type="checkbox" data-addon-id="${addOn.id}" class="h-5 w-5 rounded text-teal-600 focus:ring-teal-500 border-stone-300 ml-4">
                    `;
                    
                    // Add event listener for checkbox
                    const checkbox = addOnElement.querySelector('input');
                    checkbox.addEventListener('change', (e) => handleAddOnSelection(addOn.id, e.target.checked));
                    
                    addonsSelectionContainer.appendChild(addOnElement);
                });
            } else {
                // English add-ons with bundle styling
                addOns.forEach(addOn => {
                    const addOnElement = document.createElement('label');
                    const bundleClass = addOn.isBundle ? 'bg-teal-50 border-2 border-teal-200' : 'bg-stone-100';
                    addOnElement.className = `flex items-center ${bundleClass} p-4 rounded-lg cursor-pointer hover:bg-stone-200 transition-colors justify-between`;
                    
                    const bundleLabel = addOn.isBundle ? '<span class="text-xs bg-teal-600 text-white px-2 py-1 rounded-full ml-2">Bundle</span>' : '';
                    
                    addOnElement.innerHTML = `
                        <div class="text-left">
                            <div class="addon-feature-link text-stone-700 hover:underline cursor-pointer feature-item" data-feature="${getAddonFeatureKey(addOn.id)}">
                                <span class="font-semibold">${addOn.name}</span>
                                ${bundleLabel}
                            </div>
                            <div class="text-sm text-stone-500">
                                +${addOn.priceOMR} OMR/mo
                            </div>
                        </div>
                        <input type="checkbox" data-addon-id="${addOn.id}" class="h-5 w-5 rounded text-teal-600 focus:ring-teal-500 border-stone-300">
                    `;
                    
                    // Add event listener for checkbox
                    const checkbox = addOnElement.querySelector('input');
                    checkbox.addEventListener('change', (e) => handleAddOnSelection(addOn.id, e.target.checked));
                    
                    addonsSelectionContainer.appendChild(addOnElement);
                });

                // Add event listeners for feature links in add-ons (English only)
                document.querySelectorAll('.addon-feature-link').forEach(link => {
                    link.addEventListener('click', (event) => {
                        event.preventDefault(); // Prevent default anchor behavior
                        const targetId = event.target.getAttribute('href'); // Get href attribute
                        const targetSection = document.querySelector(targetId);
                        if (targetSection) {
                            targetSection.scrollIntoView({ behavior: 'smooth' }); // Scroll to view
                        }
                    });
                });
            }
        }

        // Language functionality
        let currentLang = localStorage.getItem('chatoman_language') || 'en';

        function updateLanguageView(lang) {
            // Hide all language content first
            document.querySelectorAll('.lang-ar, .lang-en').forEach(el => {
                el.style.display = 'none';
            });

            // Show only the selected language content
            if (lang === 'ar') {
                document.querySelectorAll('.lang-ar').forEach(el => {
                    el.style.display = 'block';
                });
                // Update document direction for Arabic
                document.documentElement.setAttribute('dir', 'rtl');
                document.body.style.direction = 'rtl';
            } else {
                document.querySelectorAll('.lang-en').forEach(el => {
                    el.style.display = 'block';
                });
                // Update document direction for English
                document.documentElement.setAttribute('dir', 'ltr');
                document.body.style.direction = 'ltr';
            }

            // Update document language attribute
            document.documentElement.setAttribute('lang', lang);

            // Re-render pricing for the current language
            renderPricing(lang, currentBillingCycle[lang]);
            
            // Re-render add-ons for proper RTL formatting
            renderAddOns();
            
            updateDisplay();
        }

        function switchLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('chatoman_language', lang);

            // Update button text
            const langButton = document.getElementById('lang-button');
            langButton.textContent = lang.toUpperCase() + ' ▾';

            // Hide dropdown
            document.getElementById('lang-dropdown').classList.add('hidden');

            // Update language view
            updateLanguageView(lang);
        }

        // Modal elements
        const featureModal = document.getElementById('feature-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalContent = document.getElementById('modal-content');
        const modalCloseButton = document.getElementById('modal-close-button');

        // Feature popup elements
        const featurePopupModal = document.getElementById('feature-popup-modal');
        const featurePopupTitle = document.getElementById('feature-popup-title');
        const featurePopupContent = document.getElementById('feature-popup-content');
        const featurePopupCloseButton = document.getElementById('feature-popup-close-button');

        function openModal(title, content) {
            modalTitle.textContent = title;
            modalContent.innerHTML = content; // Changed to innerHTML
            featureModal.classList.add('show');
        }

        function closeModal() {
            modalTitle.textContent = ''; // Clear title
            modalContent.innerHTML = ''; // Clear content
            featureModal.classList.remove('show');
        }

        function openFeaturePopup(featureKey) {
            const lang = currentLang;
            const feature = featurePopupData[featureKey];
            
            if (!feature) return;
            
            featurePopupTitle.textContent = feature.title[lang];
            featurePopupContent.textContent = feature.description[lang];
            featurePopupModal.classList.add('show');
            
            // Prevent body scrolling
            document.body.style.overflow = 'hidden';
        }

        function closeFeaturePopup() {
            featurePopupModal.classList.remove('show');
            document.body.style.overflow = 'auto';
        }

        // Feature popup data - bilingual descriptions
        const featurePopupData = {
            'messages': {
                title: { en: 'Handle up to 1,000 Customer Messages', ar: 'يعالج حتى ١٬٠٠٠ رسالة من العملاء' },
                description: { 
                    en: 'Each time your chatbot replies to a user, it uses 1 message credit. 1,000 messages = 1,000 conversations handled automatically — without staff, without delay, and without missing a single customer.',
                    ar: 'كل مرة يرد فيها روبوت الدردشة على العميل، يستخدم رصيد رسالة واحد. تتضمن الخطط أرصدة شهرية تتجدد كل دورة فوترة.'
                }
            },
            'agents': {
                title: { en: '1 Personalized AI Chatbot', ar: 'روبوت دردشة ذكي مخصص' },
                description: { 
                    en: 'A fully trained AI assistant customized to your business — not generic scripts. It understands your services, tone, and FAQs, and responds naturally in Arabic and English.',
                    ar: 'الوكيل الذكي هو روبوت دردشة منفصل بقاعدة معرفة خاصة به. استخدم وكلاء منفصلين لأغراض مختلفة كالمبيعات أو الدعم أو الحجوزات.'
                }
            },
            'basic-faq': {
                title: { en: 'Built-In Answers to Common Questions', ar: 'إجابات مدمجة للأسئلة الشائعة' },
                description: { 
                    en: 'We pre-load your chatbot with smart responses to your most frequent questions (about hours, prices, services, locations, etc.). Done-for-you — so your team doesn\'t have to repeat themselves.',
                    ar: 'إعداد أولي للأسئلة الشائعة الأساسية بناءً على معلومات عملك، مما يضمن قدرة روبوت الدردشة على الإجابة على أسئلة العملاء الشائعة.'
                }
            },
            'response-updates': {
                title: { en: 'Biweekly Performance Tweaks', ar: 'تحسينات أداء نصف شهرية' },
                description: { 
                    en: 'Twice a month, we review how your chatbot is performing and refine its answers to reduce confusion, increase bookings, and make replies sound more natural. You get smarter results with zero extra work.',
                    ar: 'مراجعات وتحديثات منتظمة لردود روبوت الدردشة لضمان الدقة والحفاظ على المعلومات طازجة ومتصلة بالواقع.'
                }
            },
            'chat-updates': {
                title: { en: 'Weekly Optimization & Response Tuning', ar: 'تحسينات أسبوعية وضبط الردود' },
                description: { 
                    en: 'Your chatbot gets improved weekly — based on real user conversations. We tweak answers, fix misunderstandings, and boost clarity to help your bot convert better over time.',
                    ar: 'مراجعات وتحديثات أسبوعية لتدفقات وردود روبوت الدردشة للشركات ذات الاحتياجات الديناميكية.'
                }
            },
            'light-customization': {
                title: { en: 'Tailored FAQ + Chat Flow Setup', ar: 'إعداد مخصص للأسئلة وتدفق المحادثة' },
                description: { 
                    en: 'We don\'t just give you a chatbot — we build the logic. We map your services, lead capture flows, and customer journey into a clean, effective conversation design that drives action.',
                    ar: 'تخصيص أساسي لشخصية روبوت الدردشة وتدفقات المحادثة لتوجيه المستخدمين خلال التفاعلات الشائعة.'
                }
            },
            'full-personalization': {
                title: { en: 'Fully Tailored to Your Brand & Offers', ar: 'مخصص بالكامل لعلامتك التجارية وعروضك' },
                description: { 
                    en: 'Your chatbot looks, speaks, and acts like part of your business — not like a generic AI assistant. We match your tone of voice, priorities, and services exactly. It\'s a digital team member, not a template.',
                    ar: 'تخصيص شامل يتضمن تخصيص عميق للشخصية، وتدفقات متقدمة، ومراجعات أداء.'
                }
            },
            'branding-removed': {
                title: { en: 'No External Logos — Your Brand Only', ar: 'بدون شعارات خارجية — علامتك فقط' },
                description: { 
                    en: 'We remove all ChatOman or Chatbase logos from your chatbot. Customers only see your brand — no third-party distractions. This builds trust and makes your business look more professional.',
                    ar: 'يزيل عبارات "مدعوم من" والعلامات التجارية للطرف الثالث، مما يجعل روبوت الدردشة يبدو ملكك بالكامل.'
                }
            },
            'custom-domain': {
                title: { en: 'Branded Link (chat.yourbusiness.com)', ar: 'رابط مخصص يحمل اسم نشاطك التجاري ويعزز احترافيتك' },
                description: { 
                    en: 'Instead of a generic chatbot link, your bot lives on a branded subdomain of your own website (like chat.yoursalon.com). This keeps the customer inside your ecosystem and reinforces brand trust.',
                    ar: 'استضف روبوت الدردشة على نطاقك الفرعي (مثل bot.yourbusiness.com) لمزيد من الاحترافية.'
                }
            },
            'dedicated-manager': {
                title: { en: 'Your Own Chatbot Success Specialist', ar: 'أخصائي نجاح روبوت الدردشة الخاص بك' },
                description: { 
                    en: 'A real person on our team who manages your bot\'s setup, training, and performance. They\'re your single point of contact — available whenever you want updates, changes, or advice.',
                    ar: 'مدير مخصص يشرف على أداء روبوت الدردشة ويقدم توصيات مخصصة.'
                }
            },
            'extra-credits': {
                title: { en: 'Extra 1,000 Messages', ar: '١,٠٠٠ رسالة إضافية' },
                description: { 
                    en: 'Handle 1,000 more conversations every month — ideal when your chatbot starts engaging more leads than expected. Scale without limits and never miss a reply.',
                    ar: 'تعامل مع ١,٠٠٠ محادثة إضافية شهريًا — مثالي عندما يبدأ روبوت الدردشة في جذب عملاء أكثر من المتوقع.'
                }
            },
            'extra-ai-action': {
                title: { en: 'Extra AI Action', ar: 'إجراء ذكاء اصطناعي إضافي' },
                description: { 
                    en: 'Add another automated task — like booking, order lookup, file upload, or lead qualification. Each AI Action is a time-saving tool that replaces staff tasks with instant replies.',
                    ar: 'أضف مهمة آلية أخرى — مثل الحجز، البحث عن الطلبات، رفع الملفات، أو تأهيل العملاء المحتملين.'
                }
            },
            'extra-ai-agent': {
                title: { en: 'Extra AI Agent', ar: 'وكيل ذكاء اصطناعي إضافي' },
                description: { 
                    en: 'Get another fully trained chatbot — ideal if you want separate bots for different services, languages, or departments (e.g., Sales vs. Support, Real Estate vs. Rentals).',
                    ar: 'احصل على روبوت دردشة مدرب بالكامل — مثالي إذا كنت تريد روبوتات منفصلة لخدمات أو أقسام مختلفة.'
                }
            },
            'branding-removal': {
                title: { en: 'Branding Removal', ar: 'إزالة العلامة التجارية' },
                description: { 
                    en: 'Remove all external logos (Chatbase, ChatOman) so your chatbot looks 100% like it\'s built in-house. Increases trust, professionalism, and conversion rates.',
                    ar: 'إزالة جميع الشعارات الخارجية لتبدو الخدمة كأنها مبنية داخليًا بالكامل.'
                }
            },
            'custom-domain': {
                title: { en: 'Custom Domain', ar: 'نطاق مخصص' },
                description: { 
                    en: 'Host your chatbot on a branded link like chat.yourbusiness.com. Increases customer trust and brand authority while keeping users inside your digital ecosystem.',
                    ar: 'استضف روبوت الدردشة على رابط مخصص مثل chat.yourbusiness.com لزيادة الثقة والمصداقية.'
                }
            },
            'whatsapp-ig-integration': {
                title: { en: 'WhatsApp / IG Integration', ar: 'دمج واتساب / إنستغرام' },
                description: { 
                    en: 'Let customers chat with your AI directly inside WhatsApp or Instagram DMs. This add-on turns conversations into bookings right where your customers already are.',
                    ar: 'دع العملاء يتحدثون مع الذكاء الاصطناعي مباشرة في واتساب أو رسائل إنستغرام.'
                }
            },
            'performance-report': {
                title: { en: 'Performance Report', ar: 'تقرير الأداء' },
                description: { 
                    en: 'Receive a simple, clear weekly email showing how your chatbot is performing — messages handled, top questions, and improvements made. Know what\'s working at a glance.',
                    ar: 'استلم تقريرًا أسبوعيًا واضحًا يُظهر أداء روبوت الدردشة والرسائل المُعالجة والأسئلة الأكثر شيوعًا.'
                }
            },
            'advanced-analytics': {
                title: { en: 'Advanced Analytics Dashboard', ar: 'لوحة تحكم تحليلات متقدمة' },
                description: { 
                    en: 'See detailed insights into user behavior, message flows, and conversion drop-offs. This dashboard helps you optimize performance, spot issues, and measure ROI over time.',
                    ar: 'شاهد رؤى مفصلة حول سلوك المستخدمين وتدفقات الرسائل ونقاط انخفاض التحويل.'
                }
            },
            'premium-identity': {
                title: { en: 'Premium Identity', ar: 'الهوية المميزة' },
                description: { 
                    en: 'Includes Branding Removal + Custom Domain. Your chatbot looks and feels 100% yours — no outside logos, hosted on your own branded subdomain. Maximum trust and brand consistency.',
                    ar: 'تتضمن إزالة العلامة التجارية + النطاق المخصص. روبوت الدردشة يبدو ملكك بنسبة ١٠٠٪.'
                }
            },
            'conversion-insights': {
                title: { en: 'Conversion Insights', ar: 'رؤى التحويل' },
                description: { 
                    en: 'Includes Performance Report + Advanced Analytics Dashboard. Get a full view of what\'s happening behind the scenes. Know what converts, what doesn\'t, and where to improve.',
                    ar: 'تتضمن تقرير الأداء + لوحة التحكم المتقدمة. احصل على رؤية كاملة لما يحدث خلف الكواليس.'
                }
            },
            'scale-pack': {
                title: { en: 'Scale Pack', ar: 'حزمة التوسع' },
                description: { 
                    en: 'Includes Extra AI Agent + Extra AI Action. Expand your chatbot\'s capabilities and coverage — perfect for businesses with multiple departments, complex flows, or growing demand.',
                    ar: 'تتضمن وكيل ذكاء اصطناعي إضافي + إجراء ذكاء اصطناعي إضافي. وسّع قدرات روبوت الدردشة.'
                }
            },
            'engagement-booster': {
                title: { en: 'Engagement Booster', ar: 'معزز التفاعل' },
                description: { 
                    en: 'Includes WhatsApp/IG Integration + Extra 1,000 Messages. Handle more volume and reach customers where they actually chat. Great for DMs-heavy businesses.',
                    ar: 'تتضمن دمج واتساب/إنستغرام + ١,٠٠٠ رسالة إضافية. تعامل مع حجم أكبر واصل العملاء حيث يتواصلون فعلاً.'
                }
            },
            'whatsapp-integration': {
                title: { en: 'WhatsApp / IG Integration', ar: 'تكامل مع واتساب وإنستغرام' },
                description: { 
                    en: 'This allows your chatbot to work inside WhatsApp and Instagram DMs — so customers can message your business where they already are, without visiting your website. Perfect for any Omani business that lives in the DMs.',
                    ar: 'يعمل روبوت المحادثة الخاص بك داخل رسائل واتساب وإنستغرام مباشرة — ليتواصل العملاء معك دون الحاجة لزيارة موقعك. مثالي للأنشطة العمانية التي تعتمد على الرسائل المباشرة.'
                }
            },
            'performance-report': {
                title: { en: 'Performance Report', ar: 'تقرير الأداء' },
                description: { 
                    en: 'Monthly reports detailing chatbot performance, message volume, and user satisfaction metrics.',
                    ar: 'تقارير شهرية توضح أداء روبوت الدردشة، وحجم الرسائل، ومقاييس رضا المستخدمين.'
                }
            },
            'extra-agent': {
                title: { en: 'Extra AI Agent', ar: 'وكيل ذكاء اصطناعي إضافي' },
                description: { 
                    en: 'Additional AI agent for handling different aspects of your business with separate knowledge bases.',
                    ar: 'وكيل ذكاء اصطناعي إضافي للتعامل مع جوانب مختلفة من عملك بقواعد معرفة منفصلة.'
                }
            },
            'pro-insights-pack': {
                title: { en: 'Pro Insights Pack', ar: 'حزمة رؤى المحترفين' },
                description: { 
                    en: 'Bundle including Performance Report and Branding Removal for enhanced insights and professional appearance.',
                    ar: 'حزمة تتضمن تقرير الأداء وإزالة العلامة التجارية للحصول على رؤى محسّنة ومظهر احترافي.'
                }
            },
            'elite-brand-scale': {
                title: { en: 'Elite Brand & Scale Kit', ar: 'حزمة النخبة للعلامة التجارية والتوسع' },
                description: { 
                    en: 'Comprehensive bundle with extra messages, branding removal, and custom domain for scaling businesses.',
                    ar: 'حزمة شاملة مع رسائل إضافية، وإزالة العلامة التجارية، ونطاق مخصص للشركات المتنامية.'
                }
            },
            'ai-actions': {
                title: { en: 'AI Actions', ar: 'إجراءات الذكاء الاصطناعي' },
                description: { 
                    en: 'AI Actions are smart workflows that your chatbot can perform automatically, like booking appointments, sending emails, or updating databases. More actions mean more automation for your business.',
                    ar: 'إجراءات الذكاء الاصطناعي هي مهام ذكية يمكن لروبوت الدردشة تنفيذها تلقائيًا، مثل حجز المواعيد أو إرسال الإيميلات أو تحديث قواعد البيانات.'
                }
            },
            'analytics': {
                title: { en: 'Analytics & Reports', ar: 'التحليلات والتقارير' },
                description: { 
                    en: 'Gain full visibility into your chatbot\'s performance. See how many users are interacting, where they\'re from, what they\'re asking, and when activity peaks — so you can refine content, increase engagement, and optimize for results.',
                    ar: 'شاهد تحليلات شاملة لأداء روبوت المحادثة الخاص بك. اعرف عدد المستخدمين، مواقعهم، أسئلتهم، وأوقات النشاط — لتتمكن من تحسين المحتوى وزيادة التفاعل وتحقيق أفضل النتائج.'
                }
            },
            'performance-report': {
                title: { en: 'Analytics Email', ar: 'تقارير الأداء عبر البريد الإلكتروني' },
                description: { 
                    en: 'Stay informed with a weekly performance snapshot delivered straight to your inbox. See how many conversations your chatbot handled, how many users engaged, and what customers asked most — so you know it\'s working.',
                    ar: 'استلم ملخصاً أسبوعياً لأداء روبوت المحادثة في بريدك الإلكتروني. اعرف عدد المحادثات، تفاعل المستخدمين، وأكثر الأسئلة شيوعاً — لتتأكد من فعالية الأداة.'
                }
            }
        };

        document.addEventListener('DOMContentLoaded', () => {
            // Initialize language button text
            const langButton = document.getElementById('lang-button');
            langButton.textContent = currentLang.toUpperCase() + ' ▾';

            // Language toggle functionality
            const langDropdown = document.getElementById('lang-dropdown');
            const langOptions = document.querySelectorAll('.lang-option');

            // Toggle dropdown
            langButton.addEventListener('click', (e) => {
                e.stopPropagation();
                langDropdown.classList.toggle('hidden');
            });

            // Language selection
            langOptions.forEach(option => {
                option.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const selectedLang = option.getAttribute('data-lang');
                    switchLanguage(selectedLang);
                });
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', () => {
                langDropdown.classList.add('hidden');
            });

            // Prevent dropdown from closing when clicking inside it
            langDropdown.addEventListener('click', (e) => {
                e.stopPropagation();
            });

            // Initialize pricing for both languages
            ['en', 'ar'].forEach(lang => {
                renderPricing(lang, 'monthly'); // Default to monthly
                setupBillingToggle(lang);
            });

            // Initialize with the current language
            updateLanguageView(currentLang);

            // Initialize add-ons
            renderAddOns();

            // Create English accordion
            const accordionContainerEN = document.getElementById('accordion-container-en');
            featureExplanationsEN.forEach((item, index) => {
                const accordionItem = document.createElement('div');
                accordionItem.className = 'bg-white rounded-xl shadow-sm';
                accordionItem.innerHTML = `
                    <button class="accordion-toggle flex justify-between items-center w-full p-5 font-semibold text-left">
                        <span>${item.title}</span>
                        <span class="transform transition-transform duration-300">▼</span>
                    </button>
                    <div class="accordion-content px-5 pb-5 text-stone-600">
                        <div>${item.content}</div>
                    </div>
                `;
                const toggle = accordionItem.querySelector('.accordion-toggle');
                const content = accordionItem.querySelector('.accordion-content');
                const arrow = accordionItem.querySelector('span:last-child');

                toggle.addEventListener('click', () => {
                    const isOpen = content.style.maxHeight;
                    if (isOpen && isOpen !== '0px') {
                        content.style.maxHeight = '0px';
                        arrow.style.transform = 'rotate(0deg)';
                    } else {
                        content.style.maxHeight = content.scrollHeight + 'px';
                        arrow.style.transform = 'rotate(180deg)';
                    }
                });

                accordionContainerEN.appendChild(accordionItem);
            });

            // Create Arabic accordion
            const accordionContainerAR = document.getElementById('accordion-container-ar');
            featureExplanationsAR.forEach((item, index) => {
                const accordionItem = document.createElement('div');
                accordionItem.className = 'bg-white rounded-xl shadow-sm';
                accordionItem.style.direction = 'rtl';
                accordionItem.style.textAlign = 'right';
                accordionItem.innerHTML = `
                    <button class="accordion-toggle flex justify-between items-center w-full p-5 font-semibold text-right font-tajawal" style="direction: rtl; text-align: right;">
                        <span class="transform transition-transform duration-300">⌄</span>
                        <span>${item.title}</span>
                    </button>
                    <div class="accordion-content px-5 pb-5 text-stone-600 font-tajawal" style="direction: rtl; text-align: right;">
                        <div>${item.content}</div>
                    </div>
                `;
                const toggle = accordionItem.querySelector('.accordion-toggle');
                const content = accordionItem.querySelector('.accordion-content');
                const arrow = accordionItem.querySelector('span:first-child');

                toggle.addEventListener('click', () => {
                    const isOpen = content.style.maxHeight;
                    if (isOpen && isOpen !== '0px') {
                        content.style.maxHeight = '0px';
                        arrow.style.transform = 'rotate(0deg)';
                    } else {
                        content.style.maxHeight = content.scrollHeight + 'px';
                        arrow.style.transform = 'rotate(180deg)';
                    }
                });

                accordionContainerAR.appendChild(accordionItem);
            });

            // Close modal events
            modalCloseButton.addEventListener('click', closeModal);
            featureModal.addEventListener('click', (event) => {
                if (event.target === featureModal) { // Close only if clicking on the overlay, not the content
                    closeModal();
                }
            });

            // Feature popup modal events
            featurePopupCloseButton.addEventListener('click', closeFeaturePopup);
            featurePopupModal.addEventListener('click', (event) => {
                if (event.target === featurePopupModal) {
                    closeFeaturePopup();
                }
            });

            // Forms.app fullscreen embed for Lead Booster
            function openLeadBoosterFormsApp() {
                // Check if forms.app embed is available
                if (typeof window.FormsApp !== 'undefined' && window.FormsApp.embed) {
                    try {
                        // Use forms.app fullscreen embed
                        window.FormsApp.embed({
                            formId: '6895a50d68a8d00002bfbda2',
                            host: 'https://9kkd846w.forms.app',
                            fullscreen: true
                        });
                    } catch (error) {
                        console.error('Forms.app fullscreen embed failed:', error);
                        // Fallback to direct form URL
                        window.open('https://9kkd846w.forms.app/my-new-form', '_blank');
                    }
                } else {
                    // Fallback if forms.app embed is not loaded
                    window.open('https://9kkd846w.forms.app/my-new-form', '_blank');
                }
            }

            // Add feature popup listeners to add-ons after rendering
            document.addEventListener('click', (e) => {
                if (e.target.closest('.feature-item')) {
                    const featureItem = e.target.closest('.feature-item');
                    const featureKey = featureItem.dataset.feature;
                    if (featureKey) {
                        e.stopPropagation();
                        openFeaturePopup(featureKey);
                    }
                }
            });

            updateDisplay();

            // Run language audit after everything is loaded
            setTimeout(() => {
                auditLanguageSeparation();
            }, 1000);

            // Test function for language switching and pricing
            window.testLanguageAndPricing = function() {
                console.log('Testing Arabic view with monthly pricing...');
                switchLanguage('ar');
                isYearly = false;
                monthlyToggle.classList.add('active');
                yearlyToggle.classList.remove('active');
                toggleSlider.classList.remove('yearly');
                renderPlanCards();
                updateDisplay();
                updateLanguageView('ar');

                setTimeout(() => {
                    console.log('Testing Arabic view with yearly pricing...');
                    isYearly = true;
                    yearlyToggle.classList.add('active');
                    monthlyToggle.classList.remove('active');
                    toggleSlider.classList.add('yearly');
                    renderPlanCards();
                    updateDisplay();

                    setTimeout(() => {
                        console.log('Testing English view with monthly pricing...');
                        switchLanguage('en');
                        isYearly = false;
                        monthlyToggle.classList.add('active');
                        yearlyToggle.classList.remove('active');
                        toggleSlider.classList.remove('yearly');
                        renderPlanCards();
                        updateDisplay();
                        updateLanguageView('en');

                        setTimeout(() => {
                            console.log('Testing English view with yearly pricing...');
                            isYearly = true;
                            yearlyToggle.classList.add('active');
                            monthlyToggle.classList.remove('active');
                            toggleSlider.classList.add('yearly');
                            renderPlanCards();
                            updateDisplay();

                            console.log('All tests complete. Run auditLanguageSeparation() to check for issues.');
                            auditLanguageSeparation();
                        }, 1000);
                    }, 1000);
                }, 1000);
            };

            console.log('Use testLanguageAndPricing() to test all language/pricing combinations');

            

            // Free Setup Modal functionality
            const freeSetupModal = document.getElementById('free-setup-modal');
            const freeSetupCloseButton = document.getElementById('free-setup-close-button');
            const freeSetupCloseButtonAr = document.getElementById('free-setup-close-button-ar');
            const freeSetupCloseEn = document.getElementById('free-setup-close-en');
            const freeSetupCloseAr = document.getElementById('free-setup-close-ar');

            function openFreeSetupModal() {
                freeSetupModal.classList.add('show');
                document.body.style.overflow = 'hidden';
            }

            function closeFreeSetupModal() {
                freeSetupModal.classList.remove('show');
                document.body.style.overflow = 'auto';
            }

            // Plan Selection Modal functionality
            const planSelectionModal = document.getElementById('plan-selection-modal');
            const planSelectionCloseButton = document.getElementById('plan-selection-close-button');
            const planSelectionCloseButtonAr = document.getElementById('plan-selection-close-button-ar');
            const planSelectionCloseEn = document.getElementById('plan-selection-close-en');
            const planSelectionCloseAr = document.getElementById('plan-selection-close-ar');

            function openPlanSelectionModal() {
                planSelectionModal.classList.add('show');
                document.body.style.overflow = 'hidden';
            }

            function closePlanSelectionModal() {
                planSelectionModal.classList.remove('show');
                document.body.style.overflow = 'auto';
            }

            // Link "Get Started" buttons to open plan selection modal
            document.getElementById('get-started-btn-static').addEventListener('click', () => {
                openPlanSelectionModal();
            });

            document.getElementById('get-started-btn-static-ar').addEventListener('click', () => {
                openPlanSelectionModal();
            });

            document.getElementById('sticky-get-started').addEventListener('click', () => {
                openPlanSelectionModal();
            });

            // Close modal events for plan selection
            planSelectionCloseButton.addEventListener('click', closePlanSelectionModal);
            planSelectionCloseButtonAr.addEventListener('click', closePlanSelectionModal);
            planSelectionCloseEn.addEventListener('click', closePlanSelectionModal);
            planSelectionCloseAr.addEventListener('click', closePlanSelectionModal);

            // Close modal when clicking outside for plan selection
            planSelectionModal.addEventListener('click', (event) => {
                if (event.target === planSelectionModal) {
                    closePlanSelectionModal();
                }
            });

            // Handle plan selection clicks
            document.querySelectorAll('.plan-selection-option').forEach(button => {
                button.addEventListener('click', () => {
                    const url = button.getAttribute('data-url');
                    window.open(url, '_blank');
                    closePlanSelectionModal();
                });
            });

            // Close modal events for free setup
            freeSetupCloseButton.addEventListener('click', closeFreeSetupModal);
            freeSetupCloseButtonAr.addEventListener('click', closeFreeSetupModal);
            freeSetupCloseEn.addEventListener('click', closeFreeSetupModal);
            freeSetupCloseAr.addEventListener('click', closeFreeSetupModal);

            // Close modal when clicking outside for free setup
            freeSetupModal.addEventListener('click', (event) => {
                if (event.target === freeSetupModal) {
                    closeFreeSetupModal();
                }
            });

            // Handle free setup option clicks
            document.querySelectorAll('.free-setup-option').forEach(button => {
                button.addEventListener('click', () => {
                    const url = button.getAttribute('data-url');
                    window.open(url, '_blank');
                    closeFreeSetupModal();
                });
            });

            

            // Link "Get Free Setup" buttons to open free setup modal
            document.getElementById('get-free-setup-btn').addEventListener('click', () => {
                openFreeSetupModal();
            });

            document.getElementById('get-free-setup-btn-ar').addEventListener('click', () => {
                openFreeSetupModal();
            });

            // How It Works CTA buttons - scroll to pricing section
            const howItWorksCTA = document.querySelector('.how-it-works-cta');
            const howItWorksCTAAr = document.querySelector('.how-it-works-cta-ar');
            
            if (howItWorksCTA) {
                howItWorksCTA.addEventListener('click', () => {
                    const pricingSection = document.getElementById('calculator');
                    if (pricingSection) {
                        pricingSection.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            }
            
            if (howItWorksCTAAr) {
                howItWorksCTAAr.addEventListener('click', () => {
                    const pricingSection = document.getElementById('calculator');
                    if (pricingSection) {
                        pricingSection.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            }

            // YouTube Video Modal Functionality
            const videoModal = document.getElementById('video-modal');
            const videoModalClose = document.getElementById('video-modal-close');
            const youtubeIframe = document.getElementById('youtube-iframe');
            
            // YouTube video URL - converts the shorts URL to embeddable format
            const youtubeVideoUrl = 'https://www.youtube.com/embed/t5KQpJSK3yM?autoplay=1&rel=0';
            
            // Function to open video modal
            function openVideoModal() {
                // Set the YouTube video source
                youtubeIframe.src = youtubeVideoUrl;
                
                // Show the modal with animation
                videoModal.classList.add('show');
                
                // Prevent body scrolling when modal is open
                document.body.style.overflow = 'hidden';
            }
            
            // Function to close video modal
            function closeVideoModal() {
                // Hide the modal
                videoModal.classList.remove('show');
                
                // Stop the video by clearing the src
                youtubeIframe.src = '';
                
                // Restore body scrolling
                document.body.style.overflow = 'auto';
            }
            
            // Link "See Demo" buttons to open video modal instead of scrolling
            document.getElementById('hero-get-started-btn').addEventListener('click', (event) => {
                event.preventDefault();
                openVideoModal();
            });

            document.getElementById('hero-get-started-btn-ar').addEventListener('click', (event) => {
                event.preventDefault();
                openVideoModal();
            });
            
            // Close modal when clicking the close button
            videoModalClose.addEventListener('click', closeVideoModal);
            
            // Close modal when clicking outside the video content
            videoModal.addEventListener('click', (event) => {
                if (event.target === videoModal) {
                    closeVideoModal();
                }
            });
            
            // Close modal with Escape key
            document.addEventListener('keydown', (event) => {
                if (event.key === 'Escape' && videoModal.classList.contains('show')) {
                    closeVideoModal();
                }
            });
        });

        function handlePlanSelection(planId) {
            selectedPlanId = planId;
            // Update selection visual state for all cards
            document.querySelectorAll('.plan-card').forEach(card => {
                card.classList.toggle('selected', card.dataset.planId === planId);
            });
            updateDisplay();
        }

        function handleAddOnSelection(addOnId, isSelected) {
            if (isSelected) {
                selectedAddOnIds.add(addOnId);
            } else {
                selectedAddOnIds.delete(addOnId);
            }
            updateDisplay();
        }

        function updateDisplay() {
            // Calculate totals for both languages
            const calculations = {};

            ['en', 'ar'].forEach(lang => {
                let total = 0;
                let setupFee = 0;
                const isYearly = currentBillingCycle[lang] === 'yearly';

                // Add plan price
                if (selectedPlanId) {
                    const plan = pricingData.find(p => p.id === selectedPlanId);
                    if (plan) {
                        total += isYearly ? plan.price.yearly : plan.price.monthly;
                        setupFee = isYearly ? plan.setupFee.yearly : plan.setupFee.monthly;
                    }
                }

                // Add add-on prices
                selectedAddOnIds.forEach(addOnId => {
                    const addOn = addOns.find(a => a.id === addOnId);
                    if (addOn) {
                        // For yearly billing, multiply add-on price by 12
                        total += isYearly ? (addOn.priceOMR * 12) : addOn.priceOMR; 
                    }
                });

                calculations[lang] = { total, setupFee, isYearly };
            });

            // Update English displays
            const totalPriceDisplay = document.getElementById('total-price-display');
            const setupFeeDisplay = document.getElementById('setup-fee-display');
            const totalLabelEn = document.getElementById('total-label-en');

            if (totalPriceDisplay) totalPriceDisplay.textContent = `${calculations.en.total} OMR`;
            if (setupFeeDisplay) setupFeeDisplay.textContent = `${calculations.en.setupFee} OMR`;
            if (totalLabelEn) totalLabelEn.textContent = calculations.en.isYearly ? 'Yearly Total:' : 'Monthly Total:';

            // Update Arabic displays
            const totalPriceDisplayAr = document.getElementById('total-price-display-ar');
            const setupFeeDisplayAr = document.getElementById('setup-fee-display-ar');
            const totalLabelAr = document.getElementById('total-label-ar');

            if (totalPriceDisplayAr) totalPriceDisplayAr.textContent = `${arabicDigits(calculations.ar.total)} ريال عماني`;
            if (setupFeeDisplayAr) setupFeeDisplayAr.textContent = `${arabicDigits(calculations.ar.setupFee)} ريال عماني`;
            if (totalLabelAr) totalLabelAr.textContent = calculations.ar.isYearly ? 'الإجمالي السنوي:' : 'الإجمالي الشهري:';
        }
    </script>
    <!-- Forms.app embed script -->
    <script src="https://forms.app/cdn/embed.js" defer></script>

    <!-- ChatOman / Chatbase: script embed -->
    <script>
    (function(){
      if(!window.chatbase||window.chatbase("getState")!=="initialized"){
        window.chatbase=(...arguments)=>{
          if(!window.chatbase.q){window.chatbase.q=[]}
          window.chatbase.q.push(arguments)
        };
        window.chatbase=new Proxy(window.chatbase,{
          get(target,prop){
            if(prop==="q"){return target.q}
            return(...args)=>target(prop,...args)
          }
        })
      }
      const onLoad=function(){
        const s=document.createElement("script");
        s.src="https://www.chatbase.co/embed.min.js";
        s.id="Qnz7C2BIzWuvbfBOx_maY";           // <-- your Chatbot ID (keep as is)
        s.domain="www.chatbase.co";
        document.body.appendChild(s);
      };
      if(document.readyState==="complete"){onLoad()} else {window.addEventListener("load",onLoad)}
    })();
    </script>

    <!-- ChatOman / Chatbase: register client-side form schema -->
    <script>
    (function waitForRegister(){
      // If registerFormSchema is available, register your form; otherwise, retry briefly.
      if (window.chatbase && typeof window.chatbase.registerFormSchema === "function") {
        window.chatbase.registerFormSchema({
          // IMPORTANT: This name must match the "Form name" in Chatbase > Actions > Custom form.
          // If your form there is named differently, change "ContactSupportForm" to match exactly.
          ContactSupportForm: async (args, user) => {
            return {
              fields: [
                {
                  name: "name",
                  label: "Full Name | الاسم الكامل",
                  type: "text",
                  validation: { required: { value: true, message: "Name is required" } }
                },
                {
                  name: "email",
                  label: "Email | البريد الإلكتروني",
                  type: "email",
                  validation: {
                    required: { value: true, message: "Email is required" },
                    pattern: { value: ".+@.+\\..+", message: "Invalid email" }
                  }
                },
                {
                  name: "phone",
                  label: "Phone (+ country code) | رقم الهاتف",
                  type: "phone",
                  // E.164 format; ex: +9689XXXXXXX
                  validation: {
                    pattern: { value: "^\\+[1-9]\\d{1,14}$", message: "Use intl format like +9689XXXXXXX" }
                  }
                },
                {
                  name: "service",
                  label: "Service/Topic | الخدمة",
                  type: "select",
                  options: [
                    { label: "Pricing", value: "pricing" },
                    { label: "Technical Support", value: "support" },
                    { label: "Sales/Booking", value: "sales" },
                    { label: "Other", value: "other" }
                  ],
                  validation: { required: { value: true, message: "Please choose one" } }
                },
                {
                  name: "message",
                  label: "How can we help? | كيف نساعدك؟",
                  type: "textarea",
                  validation: {
                    required: { value: true, message: "Please add a short message" },
                    minLength: { value: 5, message: "A bit more detail, please" }
                  }
                }
              ],
              submitButtonText: "Send | إرسال",
              successMessage: "Thanks! Our team will contact you shortly.",
              errorMessage: "Submission failed. Please try again."
            };
          }
        });
      } else {
        setTimeout(waitForRegister, 120);  // try again shortly until the chatbase script is ready
      }
    })();
    </script>
</body>
</html>
